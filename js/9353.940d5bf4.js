"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9353],{39353:(e,a,l)=>{l.r(a),l.d(a,{default:()=>N});var i=l(51347),n=l(34187),t=l(95455),s=l(23336),u=l(30528),d=l(69463),o=l(8633),c=l(37763),m=l(68158),r=l(6397),b=l(47543),g=l(52364),p=l(90486);const v={key:0},k={__name:"SantriDomisiliCrud",props:{data:{type:Object,required:!0},isNew:{type:Boolean,default:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,t=a,s=(0,n.KR)({}),u=(0,n.KR)(!1);(0,i.sV)((async()=>{Object.assign(s.value,l.data)}));const d=async()=>{const e={santri_id:s.value.santri_id,domisili:s.value.domisili,keterangan:s.value.keterangan};let a=null;a=l.isNew?await(0,m.A)({endPoint:"domisili",data:e,loading:u}):await(0,r.A)({endPoint:`domisili/${s.value.id}`,data:e,confirm:!0,notify:!0,loading:u}),a&&(document.getElementById("btn-close").click(),t("successSubmit"))},k=async e=>{const a={endPoint:`domisili/${e}`,loading:u},l=await(0,b.A)(a);l&&(document.getElementById("btn-close").click(),t("successDelete"))};return(a,n)=>{const t=(0,i.g2)("q-card-section"),m=(0,i.g2)("q-spinner-cube"),r=(0,i.g2)("q-dialog"),b=(0,i.g2)("q-input"),_=(0,i.g2)("q-btn"),A=(0,i.g2)("q-space"),f=(0,i.g2)("q-card-actions"),F=(0,i.g2)("q-form"),q=(0,i.g2)("q-card"),w=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.Wv)(q,{class:"full-width",style:{"max-width":"425px"}},{default:(0,i.k6)((()=>[(0,i.bF)(F,{onSubmit:(0,o.D$)(d,["prevent"])},{default:(0,i.k6)((()=>[(0,i.bF)(t,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,i.k6)((()=>[(0,i.bF)(g.A,{onEmitButton:e=>null},{default:(0,i.k6)((()=>[(0,i.eW)((0,c.v_)(l.title)+" â€” ",1),(0,i.Lk)("em",null,(0,c.v_)(e.isNew?"baru":"edit"),1)])),_:1})])),_:1}),(0,i.bF)(t,null,{default:(0,i.k6)((()=>[u.value?((0,i.uX)(),(0,i.CE)("div",v,[(0,i.bF)(r,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=e=>u.value=e),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(m,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,i.Q3)("",!0),(0,i.bF)(b,{dense:"",outlined:"",label:"Nama","model-value":s.value?.nama+" ("+s.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),(0,i.bF)(p.A,{modelValue:s.value.domisili,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value.domisili=e),url:"domisili",label:"Domisili *",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,i.bF)(b,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:s.value.keterangan,"onUpdate:modelValue":n[2]||(n[2]=e=>s.value.keterangan=e),autogrow:""},null,8,["modelValue"])])),_:1}),(0,i.bF)(f,{class:"flex bg-green-6"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(_,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:n[3]||(n[3]=e=>k(s.value.id))},null,512),[[o.aG,!l.isNew]]),(0,i.bF)(A),(0,i.bo)((0,i.bF)(_,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[w]]),(0,i.bF)(_,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var _=l(83341),A=l(53417),f=l(60222),F=l(30045),q=l(71402),w=l(46395),y=l(25034),V=l(22677),S=l(5873),C=l(61038),D=l(272),K=l.n(D);const Q=k,R=Q;K()(k,"components",{QCard:_.A,QForm:A.A,QCardSection:f.A,QDialog:F.A,QSpinnerCube:q.A,QInput:w.A,QCardActions:y.A,QBtn:V.A,QSpace:S.A}),K()(k,"directives",{ClosePopup:C.A});var h=l(60455),x=l(21734);const E={__name:"SantriDomisili",setup(e){const a=(0,n.KR)(!1),l=(0,n.KR)(!1),o=(0,n.KR)({}),c=(0,n.KR)([]),m=(0,n.KR)([]),r=(0,n.KR)(!1),b=(0,n.KR)({}),g=(0,h.lq)(),p=g.params.id;async function v(){const e=await(0,x.A)({endPoint:`santri/${p}/domisili`,loading:a});m.value=e.domisili,c.value=e.domisili.map((e=>({Tanggal:(0,s.kz)(e.date_m)+" | "+(0,u.jh)(e.date_m),Domisili:e.domisili,Keterangan:e.keterangan||"-",id:e.id}))),b.value=e.santri}(0,i.sV)((async()=>{await v()}));const k=()=>{o.value={santri_id:b.value.id,nama:b.value.nama},r.value=!0,l.value=!0},_=({id:e})=>{o.value=(0,d.I$)(m,e),o.value.santri_id=b.value.id,o.value.nama=b.value.nama,r.value=!1,l.value=!0};return(e,n)=>{const s=(0,i.g2)("q-dialog");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(t.A,{data:c.value,spinner:a.value,onAdd:k,onEdit:_},null,8,["data","spinner"]),(0,i.bF)(s,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value=e)},{default:(0,i.k6)((()=>[(0,i.bF)(R,{data:o.value,"is-new":r.value,title:"Input Domisili",onSuccessSubmit:v,onSuccessDelete:v},null,8,["data","is-new"])])),_:1},8,["modelValue"])])}}},I=E,N=I;K()(E,"components",{QDialog:F.A})}}]);