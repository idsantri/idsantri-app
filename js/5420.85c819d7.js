"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5420],{5420:(e,a,l)=>{l.r(a),l.d(a,{default:()=>L});l(7590);var n=l(1347),o=l(7543),i=l(1734),s=l(6397),t=l(4187);const u=(0,n.Lk)("div",{class:"text-h6 text-green-10"},"Data Pengguna",-1),d=(0,n.Lk)("div",{class:"text-subtitle1"},"Data User",-1),r={class:"row"},m={class:"col-md-6 col-sm-12"},c=(0,n.Lk)("div",{class:"q-pl-md text-caption"}," Verifikasi akun hanya bisa dilakukan oleh user yang bersangkutan. ",-1),b={class:"col-md-6 col-sm-12"},f=(0,n.Lk)("div",{class:"q-pl-md text-caption"}," Konfimasi bahwa Anda mengenal user ini. ",-1),v={class:"row"},g={__name:"UserPage",setup(e){const a=(0,t.KR)(!1),l=(0,t.KR)(""),g=(0,t.KR)(!1),p=(0,t.KR)([]),k=(0,t.KR)({}),V=[{name:"name",label:"Nama",align:"left",field:"name",sortable:!0},{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"email",label:"Email",align:"left",field:"email",sortable:!0},{name:"group",label:"Group",align:"left",field:e=>{const a=[];for(const[l,n]of Object.entries(e.roles))1==n&&a.push(l);return a.join(", ")},sortable:!0},{name:"confirmed_at",label:"Konfirmasi",align:"left",field:"confirmed_at",format:e=>""+(e?"Ya":"Tidak"),sortable:!0},{name:"verified",label:"Verikasi",align:"left",field:"email_verified_at",format:e=>""+(e?"Ya":"Tidak"),sortable:!0}];async function w(){const e=await(0,i.A)({endPoint:"users",loading:g});p.value=e.users}function F(e,l){a.value=!0,k.value=l,k.value.isConfirmed=!!l.confirmed_at}async function C(e){const a={confirm:e},l=k.value.id,n=await(0,s.A)({endPoint:`users/${l}/confirm`,data:a});if(!n)return k.value.isConfirmed=!k.value.isConfirmed;await w()}async function _(){const e=k.value.id;await(0,o.A)({endPoint:`users/${e}`,rerender:!0})}async function A(e,a,l){k.value.roles[a]=l;const n={role:a,value:l},o=await(0,s.A)({endPoint:`users/${e}/roles`,data:n});if(!o)return k.value.roles[a]=!l;await w()}return(0,n.sV)((async()=>{await w()})),(e,o)=>{const i=(0,n.g2)("q-icon"),s=(0,n.g2)("q-input"),t=(0,n.g2)("q-table"),w=(0,n.g2)("q-space"),q=(0,n.g2)("q-btn"),h=(0,n.g2)("q-card-section"),y=(0,n.g2)("q-toggle"),Q=(0,n.g2)("q-card-actions"),U=(0,n.g2)("q-card"),x=(0,n.g2)("q-dialog"),K=(0,n.g2)("q-page"),L=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.Wv)(K,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(t,{rows:p.value,columns:V,"row-key":"name",loading:g.value,filter:l.value,onRowClick:o[1]||(o[1]=(e,a,l)=>F(e,a,l))},{"top-left":(0,n.k6)((()=>[u])),"top-right":(0,n.k6)((()=>[(0,n.bF)(s,{outlined:"",dense:"",debounce:"300",modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value=e),placeholder:"Cari"},{append:(0,n.k6)((()=>[(0,n.bF)(i,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","loading","filter"]),(0,n.bF)(x,{modelValue:a.value,"onUpdate:modelValue":o[7]||(o[7]=e=>a.value=e)},{default:(0,n.k6)((()=>[(0,n.bF)(U,{style:{width:"700px","max-width":"90vw"}},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"bg-green-8 text-green-11 q-pa-sm row items-center"},{default:(0,n.k6)((()=>[d,(0,n.bF)(w),(0,n.bo)((0,n.bF)(q,{icon:"close",flat:"",round:"",dense:""},null,512),[[L]])])),_:1}),(0,n.bF)(h,{class:"q-gutter-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{standout:"",modelValue:k.value.name,"onUpdate:modelValue":o[2]||(o[2]=e=>k.value.name=e),label:"Nama",readonly:""},null,8,["modelValue"]),(0,n.bF)(s,{standout:"",modelValue:k.value.username,"onUpdate:modelValue":o[3]||(o[3]=e=>k.value.username=e),label:"Username",readonly:""},null,8,["modelValue"]),(0,n.bF)(s,{standout:"",modelValue:k.value.email,"onUpdate:modelValue":o[4]||(o[4]=e=>k.value.email=e),label:"Email",readonly:""},null,8,["modelValue"]),(0,n.Lk)("div",r,[(0,n.Lk)("div",m,[(0,n.bF)(y,{"model-value":!!k.value.email_verified_at,label:"Verifikasi",disable:""},null,8,["model-value"]),c]),(0,n.Lk)("div",b,[(0,n.bF)(y,{modelValue:k.value.isConfirmed,"onUpdate:modelValue":o[5]||(o[5]=e=>k.value.isConfirmed=e),label:"Konfirmasi",onClick:o[6]||(o[6]=e=>C(k.value.isConfirmed))},null,8,["modelValue"]),f])])])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",v,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.value.roles,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"col-md-6 col-sm-12",key:a},[(0,n.bF)(y,{style:{"min-width":"150px"},label:a,"model-value":e,onClick:l=>A(k.value.id,a,!e)},null,8,["label","model-value","onClick"])])))),128))])])),_:1}),(0,n.bF)(Q,{class:"bg-green-7 q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(q,{label:"Hapus",color:"negative","no-caps":"",onClick:_}),(0,n.bF)(w),(0,n.bo)((0,n.bF)(q,{label:"Tutup","no-caps":"",color:"green-10"},null,512),[[L]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var p=l(5013),k=l(7010),V=l(6395),w=l(3933),F=l(45),C=l(3341),_=l(222),A=l(5873),q=l(2677),h=l(5725),y=l(5034),Q=l(1038),U=l(272),x=l.n(U);const K=g,L=K;x()(g,"components",{QPage:p.A,QTable:k.A,QInput:V.A,QIcon:w.A,QDialog:F.A,QCard:C.A,QCardSection:_.A,QSpace:A.A,QBtn:q.A,QToggle:h.A,QCardActions:y.A}),x()(g,"directives",{ClosePopup:Q.A})}}]);