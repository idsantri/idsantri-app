"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8723],{68723:(e,a,l)=>{l.r(a),l.d(a,{default:()=>H});var t=l(51347),n=l(37763),u=l(34187),d=l(21734),o=l(8633),s=l(76162),i=l(68158),c=l(6397),r=l(47543),m=l(52364),p=l(92938);const g={key:0},b={__name:"MapelCrud",props:{data:{type:Object,required:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,d=a,b=(0,u.KR)({category:"Fan Dasar",show:1}),k=(0,u.KR)(!1),v=(0,u.KR)([]);(0,t.sV)((async()=>{Object.assign(b.value,l.data),v.value=(0,s.A)().getByStateName("tingkat-pendidikan")}));const _=async()=>{const e={urut:b.value.urut,id:b.value.id.toLowerCase(),tingkat_id:b.value.tingkat_id,mapel:b.value.mapel,mata_pelajaran:b.value.mata_pelajaran,category:b.value.category,show:b.value.show};let a=null;a=l.data.id?await(0,c.A)({endPoint:`mapel/${l.data.id}`,data:e,confirm:!0,notify:!0,loading:k}):await(0,i.A)({endPoint:"mapel",data:e,loading:k}),a&&(document.getElementById("btn-close-crud").click(),d("successSubmit",a.mapel))},F=async()=>{const e=await(0,r.A)({endPoint:`mapel/${l.data.id}`,loading:k,rerender:!1});e&&(document.getElementById("btn-close-crud").click(),d("successDelete",l.data))};return(e,a)=>{const u=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-spinner-cube"),s=(0,t.g2)("q-dialog"),i=(0,t.g2)("q-input"),c=(0,t.g2)("q-select"),r=(0,t.g2)("q-toggle"),v=(0,t.g2)("q-card"),q=(0,t.g2)("q-btn"),f=(0,t.g2)("q-space"),h=(0,t.g2)("q-card-actions"),A=(0,t.g2)("q-form"),V=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(v,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(A,{onSubmit:(0,o.D$)(_,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(m.A,{onEmitButton:e=>null},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(l.title)+" — ",1),(0,t.Lk)("em",null,(0,n.v_)(b.value.id?"edit":"baru"),1)])),_:1})])),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[k.value?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(s,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(i,{dense:"",outlined:"",label:"Urut",modelValue:b.value.urut,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value.urut=e),hint:"Nomor urut tampil"},null,8,["modelValue"]),(0,t.bF)(p.A,{modelValue:b.value.tingkat_id,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value.tingkat_id=e),class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"],selected:b.value.tingkat_id},null,8,["modelValue","rules","selected"]),(0,t.bF)(i,{class:"q-mt-sm",dense:"",outlined:"",label:"Kode/ID Mapel",modelValue:b.value.id,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value.id=e),hint:"Format: tingkat_id—kode_mapel (ibt-qur; ts-taj; aly-tau)"},null,8,["modelValue"]),(0,t.bF)(i,{dense:"",class:"q-mt-sm",outlined:"",label:"Mata Pelajaran",modelValue:b.value.mapel,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value.mapel=e),hint:"Hanya huruf dan spasi"},null,8,["modelValue"]),(0,t.bF)(i,{dense:"",class:"q-mt-sm",outlined:"",label:"Mata Pelajaran (Alias)",modelValue:b.value.mata_pelajaran,"onUpdate:modelValue":a[5]||(a[5]=e=>b.value.mata_pelajaran=e)},null,8,["modelValue"]),(0,t.bF)(c,{dense:"",class:"q-mt-sm",outlined:"",label:"Kategori Fan","emit-value":"","map-options":"",modelValue:b.value.category,"onUpdate:modelValue":a[6]||(a[6]=e=>b.value.category=e),options:["Fan Pokok","Fan Dasar","Fan Tambahan"],behavior:"menu"},null,8,["modelValue"]),(0,t.bF)(v,{bordered:"",flat:"",class:"q-px-sm q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.eW)(" Tampilkan: "),(0,t.bF)(r,{modelValue:b.value.show,"onUpdate:modelValue":a[7]||(a[7]=e=>b.value.show=e),color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(h,{class:"flex bg-green-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(q,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:F},null,512),[[o.aG,b.value.id]]),(0,t.bF)(f),(0,t.bo)((0,t.bF)(q,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close-crud"},null,512),[[V]]),(0,t.bF)(q,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var k=l(83341),v=l(53417),_=l(60222),F=l(30045),q=l(71402),f=l(46395),h=l(54611),A=l(55725),V=l(25034),y=l(22677),x=l(5873),Q=l(61038),L=l(272),C=l.n(L);const w=b,S=w;C()(b,"components",{QCard:k.A,QForm:v.A,QCardSection:_.A,QDialog:F.A,QSpinnerCube:q.A,QInput:f.A,QSelect:h.A,QToggle:A.A,QCardActions:V.A,QBtn:y.A,QSpace:x.A}),C()(b,"directives",{ClosePopup:Q.A});const P=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"text-left"},[(0,t.Lk)("th",null,"No"),(0,t.Lk)("th",null,"Kode/ID"),(0,t.Lk)("th",null,"Mapel"),(0,t.Lk)("th",null,"Mata Pelajaran"),(0,t.Lk)("th",null,"Status Fan"),(0,t.Lk)("th",null,"Tampil"),(0,t.Lk)("th",{class:"text-center"},"Edit")])],-1),T={key:0},j={colspan:"5"},K={key:1},D=(0,t.Lk)("td",{colspan:"5",class:"text-center text-green-10 text-italic"},[(0,t.eW)(" — Tidak ada data untuk ditampilkan — "),(0,t.Lk)("br"),(0,t.eW)(" — Pilih Tingkat Pendidikan — ")],-1),M=[D],U={class:"text-center"},E={__name:"MapelIndex",setup(e){const a=(0,u.KR)([]),l=(0,u.KR)(""),o=(0,u.KR)(!1),s=(0,u.KR)({}),i=(0,u.KR)(!1);async function c(e){const l=await(0,d.A)({endPoint:"mapel",loading:o,params:{tingkat_id:e}});a.value=l.mapel}function r(e){s.value=e,i.value=!0}function m(){s.value={},i.value=!0}return(0,t.wB)(l,(async e=>{e?await c(e):a.value=[]})),(e,u)=>{const d=(0,t.g2)("q-toolbar-title"),g=(0,t.g2)("q-btn"),b=(0,t.g2)("q-toolbar"),k=(0,t.g2)("q-card-section"),v=(0,t.g2)("q-card-actions"),_=(0,t.g2)("q-skeleton"),F=(0,t.g2)("q-toggle"),q=(0,t.g2)("q-markup-table"),f=(0,t.g2)("q-card"),h=(0,t.g2)("q-dialog"),A=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(A,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"bg-green-8 text-green-11 q-px-sm q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"text-subtitle1"},{default:(0,t.k6)((()=>[(0,t.eW)(" Daftar Mata Pelajaran ")])),_:1}),(0,t.bF)(g,{label:"Nilai Mapel",to:"/madrasah/nilai-mapel",dense:"",outline:"","no-caps":"",icon:"arrow_back",class:"q-px-sm q-mr-md"}),(0,t.bF)(g,{class:"text-green-10",label:"Baru",icon:"add","no-caps":"",color:"green-11",onClick:m})])),_:1})])),_:1}),(0,t.bF)(v,{align:"right",class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.bF)(p.A,{style:{width:"300px"},modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),label:"Tingkat Pendidikan",selected:l.value,class:""},null,8,["modelValue","selected"])])),_:1}),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{flat:""},{default:(0,t.k6)((()=>[P,(0,t.Lk)("tbody",null,[o.value?((0,t.uX)(),(0,t.CE)("tr",T,[(0,t.Lk)("td",j,[(0,t.bF)(_,{height:"50px"})])])):0==a.value.length?((0,t.uX)(),(0,t.CE)("tr",K,M)):((0,t.uX)(!0),(0,t.CE)(t.FK,{key:2},(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,n.v_)(e.urut),1),(0,t.Lk)("td",null,(0,n.v_)(e.id),1),(0,t.Lk)("td",null,(0,n.v_)(e.mapel),1),(0,t.Lk)("td",null,(0,n.v_)(e.mata_pelajaran),1),(0,t.Lk)("td",null,(0,n.v_)(e.category),1),(0,t.Lk)("td",null,[(0,t.bF)(F,{"model-value":!!e.show,color:"green",disable:""},null,8,["model-value"])]),(0,t.Lk)("td",U,[(0,t.bF)(g,{icon:"edit",flat:"",color:"green",onClick:a=>r(e)},null,8,["onClick"])])])))),128))])])),_:1})])),_:1})])),_:1}),(0,t.bF)(h,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=e=>i.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(S,{data:s.value,title:"Input Mata Pelajaran",onSuccessSubmit:u[1]||(u[1]=e=>c(e.tingkat_id)),onSuccessDelete:u[2]||(u[2]=e=>c(e.tingkat_id))},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var I=l(75013),B=l(66739),R=l(4629),W=l(94362),X=l(70981);const N=E,H=N;C()(E,"components",{QPage:I.A,QCard:k.A,QCardSection:_.A,QToolbar:B.A,QToolbarTitle:R.A,QBtn:y.A,QCardActions:V.A,QMarkupTable:W.A,QSkeleton:X.Ay,QToggle:A.A,QDialog:F.A})}}]);