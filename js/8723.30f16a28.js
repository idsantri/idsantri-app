"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8723],{68723:(e,a,l)=>{l.r(a),l.d(a,{default:()=>H});var t=l(51347),n=l(37763),u=l(34187),s=l(58094),d=l(8633),o=l(76162),i=l(59678),c=l(47509),r=l(20675),m=l(39987),g=l(92938);const p={key:0},b={__name:"MapelCrud",props:{data:{type:Object,required:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,n=a,s=(0,u.KR)({category:"Fan Dasar",show:1}),b=(0,u.KR)(!1),k=(0,u.KR)([]);(0,t.sV)((async()=>{Object.assign(s.value,l.data),k.value=(0,o.A)().getByStateName("tingkat-pendidikan")}));const v=async()=>{const e={sequence:s.value.sequence,id:s.value.id.toLowerCase(),tingkat_id:s.value.tingkat_id,name:s.value.name,alias:s.value.alias,category:s.value.category,show:s.value.show};let a=null;a=l.data.id?await(0,c.A)({endPoint:`mapel/${l.data.id}`,data:e,confirm:!0,notify:!0,loading:b}):await(0,i.A)({endPoint:"mapel",data:e,loading:b}),a&&(document.getElementById("btn-close-crud").click(),n("successSubmit",a.mapel))},q=async()=>{const e=await(0,r.A)({endPoint:`mapel/${l.data.id}`,loading:b});e&&(document.getElementById("btn-close-crud").click(),n("successDelete",l.data))};return(e,a)=>{const n=(0,t.g2)("q-spinner-cube"),u=(0,t.g2)("q-dialog"),o=(0,t.g2)("q-input"),i=(0,t.g2)("q-select"),c=(0,t.g2)("q-toggle"),r=(0,t.g2)("q-card"),k=(0,t.g2)("q-card-section"),F=(0,t.g2)("q-btn"),_=(0,t.g2)("q-space"),h=(0,t.g2)("q-card-actions"),A=(0,t.g2)("q-form"),f=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(r,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(A,{onSubmit:(0,d.D$)(v,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(m.A,{title:l.title,"is-new":!s.value.id},null,8,["title","is-new"]),(0,t.bF)(k,null,{default:(0,t.k6)((()=>[b.value?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.bF)(u,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(o,{dense:"",outlined:"",label:"Urut",modelValue:s.value.sequence,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.sequence=e),hint:"Nomor urut tampil"},null,8,["modelValue"]),(0,t.bF)(g.A,{modelValue:s.value.tingkat_id,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.tingkat_id=e),class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"],selected:s.value.tingkat_id},null,8,["modelValue","rules","selected"]),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Kode/ID Mapel",modelValue:s.value.id,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.id=e),hint:"Format: tingkat_id—kode_mapel (ibt-qur; ts-taj; aly-tau)"},null,8,["modelValue"]),(0,t.bF)(o,{dense:"",class:"q-mt-sm",outlined:"",label:"Mata Pelajaran",modelValue:s.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.name=e),hint:"Hanya huruf dan spasi"},null,8,["modelValue"]),(0,t.bF)(o,{dense:"",class:"q-mt-sm",outlined:"",label:"Mata Pelajaran (Alias)",modelValue:s.value.alias,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.alias=e)},null,8,["modelValue"]),(0,t.bF)(i,{dense:"",class:"q-mt-sm",outlined:"",label:"Kategori Fan","emit-value":"","map-options":"",modelValue:s.value.category,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value.category=e),options:["Fan Pokok","Fan Dasar","Fan Tambahan"],behavior:"menu"},null,8,["modelValue"]),(0,t.bF)(r,{bordered:"",flat:"",class:"q-px-sm q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.eW)(" Tampilkan: "),(0,t.bF)(c,{modelValue:s.value.show,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value.show=e),color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(h,{class:"flex bg-green-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(F,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:q},null,512),[[d.aG,s.value.id]]),(0,t.bF)(_),(0,t.bo)((0,t.bF)(F,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close-crud"},null,512),[[f]]),(0,t.bF)(F,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var k=l(83341),v=l(53417),q=l(60222),F=l(30045),_=l(71402),h=l(46395),A=l(76941),f=l(55725),V=l(25034),y=l(22677),Q=l(5873),x=l(61038),w=l(272),C=l.n(w);const L=b,S=L;C()(b,"components",{QCard:k.A,QForm:v.A,QCardSection:q.A,QDialog:F.A,QSpinnerCube:_.A,QInput:h.A,QSelect:A.A,QToggle:f.A,QCardActions:V.A,QBtn:y.A,QSpace:Q.A}),C()(b,"directives",{ClosePopup:x.A});const P=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"text-left"},[(0,t.Lk)("th",null,"No"),(0,t.Lk)("th",null,"Kode/ID"),(0,t.Lk)("th",null,"Mapel"),(0,t.Lk)("th",null,"Mata Pelajaran"),(0,t.Lk)("th",null,"Status Fan"),(0,t.Lk)("th",null,"Tampil"),(0,t.Lk)("th",{class:"text-center"},"Edit")])],-1),T={key:0},K={colspan:"5"},D={key:1},M=(0,t.Lk)("td",{colspan:"5",class:"text-center text-green-10 text-italic"},[(0,t.eW)(" — Tidak ada data untuk ditampilkan — "),(0,t.Lk)("br"),(0,t.eW)(" — Pilih Tingkat Pendidikan — ")],-1),U=[M],I={class:"text-center"},j={__name:"MapelIndex",setup(e){const a=(0,u.KR)([]),l=(0,u.KR)(""),d=(0,u.KR)(!1),o=(0,u.KR)({}),i=(0,u.KR)(!1);async function c(e){const l=await(0,s.A)({endPoint:"mapel",loading:d,params:{tingkat_id:e}});a.value=l.mapel}function r(e){o.value=e,i.value=!0}function m(){o.value={},i.value=!0}return(0,t.wB)(l,(async e=>{e?await c(e):a.value=[]})),(e,u)=>{const s=(0,t.g2)("q-toolbar-title"),p=(0,t.g2)("q-btn"),b=(0,t.g2)("q-toolbar"),k=(0,t.g2)("q-card-section"),v=(0,t.g2)("q-card-actions"),q=(0,t.g2)("q-skeleton"),F=(0,t.g2)("q-toggle"),_=(0,t.g2)("q-markup-table"),h=(0,t.g2)("q-card"),A=(0,t.g2)("q-dialog"),f=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(f,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"bg-green-8 text-green-11 q-px-sm q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"text-subtitle1"},{default:(0,t.k6)((()=>[(0,t.eW)(" Daftar Mata Pelajaran ")])),_:1}),(0,t.bF)(p,{label:"Nilai Mapel",to:"/madrasah/nilai-mapel",dense:"",outline:"","no-caps":"",icon:"arrow_back",class:"q-px-sm q-mr-md"}),(0,t.bF)(p,{class:"text-green-10",label:"Baru",icon:"add","no-caps":"",color:"green-11",onClick:m})])),_:1})])),_:1}),(0,t.bF)(v,{align:"right",class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.bF)(g.A,{style:{width:"300px"},modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),label:"Tingkat Pendidikan",selected:l.value,class:""},null,8,["modelValue","selected"])])),_:1}),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{flat:""},{default:(0,t.k6)((()=>[P,(0,t.Lk)("tbody",null,[d.value?((0,t.uX)(),(0,t.CE)("tr",T,[(0,t.Lk)("td",K,[(0,t.bF)(q,{height:"50px"})])])):0==a.value.length?((0,t.uX)(),(0,t.CE)("tr",D,U)):((0,t.uX)(!0),(0,t.CE)(t.FK,{key:2},(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,n.v_)(e.sequence),1),(0,t.Lk)("td",null,(0,n.v_)(e.id),1),(0,t.Lk)("td",null,(0,n.v_)(e.name),1),(0,t.Lk)("td",null,(0,n.v_)(e.alias),1),(0,t.Lk)("td",null,(0,n.v_)(e.category),1),(0,t.Lk)("td",null,[(0,t.bF)(F,{"model-value":!!e.show,color:"green",disable:""},null,8,["model-value"])]),(0,t.Lk)("td",I,[(0,t.bF)(p,{icon:"edit",flat:"",color:"green",onClick:a=>r(e)},null,8,["onClick"])])])))),128))])])),_:1})])),_:1})])),_:1}),(0,t.bF)(A,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=e=>i.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(S,{data:o.value,title:"Input Mata Pelajaran",onSuccessSubmit:u[1]||(u[1]=e=>c(e.tingkat_id)),onSuccessDelete:u[2]||(u[2]=e=>c(e.tingkat_id))},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var E=l(75013),R=l(66739),B=l(4629),X=l(94362),W=l(70981);const N=j,H=N;C()(j,"components",{QPage:E.A,QCard:k.A,QCardSection:q.A,QToolbar:R.A,QToolbarTitle:B.A,QBtn:y.A,QCardActions:V.A,QMarkupTable:X.A,QSkeleton:W.Ay,QToggle:f.A,QDialog:F.A})}}]);