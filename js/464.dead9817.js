"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[464],{464:(a,e,l)=>{l.r(e),l.d(e,{default:()=>ma});var t=l(1347),n=(l(7590),l(7763)),s=l(4187),u=l(1734),i=l(3336),o=l(455),d=l(2561),r=l(423);const c={key:0},v={key:1,class:"row"},m={class:"col-4 q-pr-sm"},p={class:"col"},g={class:"text-caption text-italic"},b={class:"q-mb-sm"},k={__name:"PersonaliaIdentitasCard",setup(a){const e=(0,o.lq)(),l=(0,o.rd)(),k=(0,s.KR)({}),_=(0,s.KR)({}),h=(0,s.KR)(!1),q=(0,s.KR)(!1);async function F(a){q.value=!1,a.id==e.params.id?(await A(),await f()):l.push(`/personalia/${a.id}`)}async function f(){const a=await(0,u.A)({endPoint:`images/aparatur/${k.value.id}`});k.value.image=a.image_url}async function A(){const a=await(0,u.A)({endPoint:`aparatur/${e.params.id}`,loading:h});k.value=a.aparatur,_.value={Nama:`${k.value.nama?.toUpperCase()} (${k.value.sex?.toUpperCase()})`,Alamat:`${k.value.jl||" "} RT ${String(k.value.rt||0).padStart(3,0)} RW ${String(k.value.rw||0).padStart(3,"0")} ${k.value.desa||" "} ${k.value.kecamatan||" "} ${k.value.kabupaten||" "} ${k.value.provinsi||" "} ${k.value.kode_pos||" "}`.replace(/\s\s+/g," "),Kelahiran:`${k.value.tmp_lahir||"-"}, ${(0,i.H6)(k.value.tgl_lahir)}`,Telepon:k.value.telepon||"-",Email:k.value.email||"-"}}(0,t.sV)((async()=>{e.params.id&&(await A(),await f())}));const w=(0,s.KR)(!1),y=a=>w.value=a;async function C(){w.value=!1,await f()}return(a,l)=>{const u=(0,t.g2)("q-toolbar-title"),i=(0,t.g2)("q-btn"),o=(0,t.g2)("q-toolbar"),f=(0,t.g2)("q-card-section"),A=(0,t.g2)("q-spinner-cube"),Q=(0,t.g2)("q-img"),x=(0,t.g2)("q-card"),V=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(x,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"bg-green-8 no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:(0,t.k6)((()=>[(0,t.eW)(" Data Personalia ")])),_:1}),(0,t.bF)(i,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:l[0]||(l[0]=a=>q.value=!0)})])),_:1})])),_:1}),(0,t.bF)(f,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[h.value?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(A,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("div",m,[(0,t.bF)(Q,{src:k.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),(0,t.bF)(i,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:l[1]||(l[1]=a=>w.value=!0)})]),(0,t.Lk)("div",p,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(_.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.Lk)("div",g,(0,n.v_)(e),1),(0,t.Lk)("div",b,(0,n.v_)(a),1)])))),128))])]))])),_:1})])),_:1}),(0,t.bF)(V,{persistent:"",modelValue:q.value,"onUpdate:modelValue":l[2]||(l[2]=a=>q.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(d.A,{"is-new":!1,"data-aparatur":k.value,onSuccessSubmit:F,onSuccessDelete:F},null,8,["data-aparatur"])])),_:1},8,["modelValue"]),(0,t.bF)(r.A,{"show-uploader":w.value,url:`/images/aparatur/${(0,s.R1)(e).params.id}`,onUpdateUploader:y,onSuccessUpload:C},null,8,["show-uploader","url"])],64)}}};var _=l(3341),h=l(222),q=l(6739),F=l(4629),f=l(2677),A=l(1402),w=l(7472),y=l(45),C=l(272),Q=l.n(C);const x=k,V=x;Q()(k,"components",{QCard:_.A,QCardSection:h.A,QToolbar:q.A,QToolbarTitle:F.A,QBtn:f.A,QSpinnerCube:A.A,QImg:w.A,QDialog:y.A});var j=l(8633),S=l(2364),K=l(7543),$=l(8158),R=l(6397),X=l(2010);const P={key:0},T={__name:"PersonaliaMadrasahModal",props:{data:{type:Object,required:!0},isNew:{type:Boolean,default:!0}},emits:["successSubmit","successDelete"],setup(a,{emit:e}){const l=a,u=e,i=(0,s.KR)({}),o=(0,s.KR)([]),d=(0,s.KR)([]),r=(0,s.KR)(!1);(0,t.sV)((async()=>{Object.assign(i.value,l.data),await(0,X.nQ)({key:"tahun-ajaran",loading:d,lists:o,sort:!1}),await(0,X.nQ)({key:"tingkat-pendidikan",loading:d,lists:o,sort:!0}),await(0,X.Mr)({key:"kelas",loading:d,lists:o,sort:!0}),await(0,X.Mr)({key:"jabatan-madrasah",loading:d,lists:o,sort:!0})}));const c=async()=>{const a={id:i.value.id,aparatur_id:i.value.aparatur_id,jabatan:i.value.jabatan,th_ajaran_h:i.value.th_ajaran_h,tingkat_id:i.value.tingkat_id,kelas:i.value.kelas,ruang:i.value.ruang,keterangan:i.value.keterangan};let e=null;e=l.isNew?await(0,$.A)({endPoint:"aparatur-madrasah",data:a,loading:r}):await(0,R.A)({endPoint:`aparatur-madrasah/${a.id}`,data:a,confirm:!0,loading:r}),e&&u("successSubmit")},v=async a=>{const e=await(0,K.A)({endPoint:`aparatur-madrasah/${a}`,loading:r});e&&u("successDelete")};return(e,s)=>{const u=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-spinner-cube"),p=(0,t.g2)("q-input"),g=(0,t.g2)("q-select"),b=(0,t.g2)("q-btn"),k=(0,t.g2)("q-space"),_=(0,t.g2)("q-card-actions"),h=(0,t.g2)("q-form"),q=(0,t.g2)("q-card"),F=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(q,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(h,{onSubmit:(0,j.D$)(c,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(S.A,{onEmitButton:a=>null},{default:(0,t.k6)((()=>[(0,t.eW)(" Jabatan Madrasiyah â€” "),(0,t.Lk)("em",null,(0,n.v_)(a.isNew?"baru":"edit"),1)])),_:1})])),_:1}),r.value?((0,t.uX)(),(0,t.CE)("div",P,[(0,t.bF)(m,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.Wv)(u,{key:1},{default:(0,t.k6)((()=>[(0,t.bF)(p,{dense:"",outlined:"",label:"Nama","model-value":i.value?.nama+" ("+i.value?.aparatur_id+")",disable:"",filled:""},null,8,["model-value"]),(0,t.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Jabatan",modelValue:i.value.jabatan,"onUpdate:modelValue":s[0]||(s[0]=a=>i.value.jabatan=a),options:o.value["jabatan-madrasah"],"option-value":"val0","option-label":"val0","emit-value":"","map-options":"",rules:[a=>!!a||"Harus diisi!"],"error-color":"negative",loading:d.value["jabatan-madrasah"],behavior:"menu"},null,8,["modelValue","options","rules","loading"]),(0,t.bF)(g,{dense:"",hint:9==i.value.th_ajaran_h?.length?o.value["tahun-ajaran"]?.find((a=>a.val0===i.value.th_ajaran_h))?.val1:"",class:"q-mt-sm",outlined:"",label:"Tahun Ajaran",modelValue:i.value.th_ajaran_h,"onUpdate:modelValue":s[1]||(s[1]=a=>i.value.th_ajaran_h=a),options:o.value["tahun-ajaran"],"option-value":"val0","option-label":"val0","emit-value":"","map-options":"",rules:[a=>!!a||"Harus diisi!"],"error-color":"negative",loading:d.value["tahun-ajaran"],behavior:"menu"},null,8,["hint","modelValue","options","rules","loading"]),(0,t.bF)(g,{dense:"",hint:isNaN(i.value.tingkat_id)?"Jenjang Pendidikan":o.value["tingkat-pendidikan"]?.find((a=>a.val0==i.value.tingkat_id))?.val1,class:"q-mt-sm",outlined:"",label:"Tingkat Pendidikan",modelValue:i.value.tingkat_id,"onUpdate:modelValue":s[2]||(s[2]=a=>i.value.tingkat_id=a),options:o.value["tingkat-pendidikan"],"option-value":"val0","option-label":"val1","emit-value":"","map-options":"",rules:[a=>!!a||"Harus diisi!"],"error-color":"negative",loading:d.value["tingkat-pendidikan"],behavior:"menu"},null,8,["hint","modelValue","options","rules","loading"]),(0,t.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Kelas","emit-value":"","map-options":"",modelValue:i.value.kelas,"onUpdate:modelValue":s[3]||(s[3]=a=>i.value.kelas=a),options:o.value["kelas"],loading:d.value["kelas"],clearable:"",behavior:"menu"},null,8,["modelValue","options","loading"]),(0,t.bF)(p,{dense:"",class:"q-mt-sm",outlined:"",label:"Ruang",modelValue:i.value.ruang,"onUpdate:modelValue":s[4]||(s[4]=a=>i.value.ruang=a)},null,8,["modelValue"]),(0,t.bF)(p,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:i.value.keterangan,"onUpdate:modelValue":s[5]||(s[5]=a=>i.value.keterangan=a),autogrow:""},null,8,["modelValue"])])),_:1})),(0,t.bF)(_,{class:"flex bg-green-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(b,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:s[6]||(s[6]=a=>v(i.value.id))},null,512),[[j.aG,!l.isNew]]),(0,t.bF)(k),(0,t.bo)((0,t.bF)(b,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close-santri-crud"},null,512),[[F]]),(0,t.bF)(b,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var E=l(3417),W=l(6067),L=l(6199),U=l(5034),D=l(5873),I=l(1038);const N=T,M=N;Q()(T,"components",{QCard:_.A,QForm:E.A,QCardSection:h.A,QSpinnerCube:A.A,QInput:W.A,QSelect:L.A,QCardActions:U.A,QBtn:f.A,QSpace:D.A}),Q()(T,"directives",{ClosePopup:I.A});var B=l(9463);const H={key:0},J={key:1},z={key:0},O=(0,t.Lk)("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[(0,t.eW)(" Tidak data data untuk ditampilkan."),(0,t.Lk)("br"),(0,t.eW)("Silakan tambahkah data! ")],-1),G=[O],Y={class:"text-bold"},Z={__name:"PersonaliaMadrasahCard",setup(a){const e=(0,o.lq)(),l=(0,s.KR)(!1),i=(0,s.KR)([]),d=(0,s.KR)({}),r=(0,s.KR)(!1),c=(0,s.KR)({}),v=(0,s.KR)(!1);async function m(){r.value=!1,await p()}async function p(){if(e.params.id){const a=await(0,u.A)({endPoint:`aparatur/${e.params.id}/madrasah`,loading:l});i.value=a.aparatur_madrasah,d.value=a.aparatur}}(0,t.sV)((async()=>{await p()}));const g=()=>{c.value={aparatur_id:d.value.id,nama:d.value.nama},v.value=!0,r.value=!0},b=a=>{c.value=(0,B.I)(i.value,a),c.value.nama=d.value.nama,v.value=!1,r.value=!0};return(a,e)=>{const s=(0,t.g2)("q-toolbar-title"),u=(0,t.g2)("q-btn"),o=(0,t.g2)("q-toolbar"),d=(0,t.g2)("q-card-section"),p=(0,t.g2)("q-skeleton"),k=(0,t.g2)("q-item-label"),_=(0,t.g2)("q-item-section"),h=(0,t.g2)("q-item"),q=(0,t.g2)("q-list"),F=(0,t.g2)("q-card"),f=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(F,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"bg-green-8 no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:(0,t.k6)((()=>[(0,t.eW)(" Jabatan ")])),_:1}),(0,t.bF)(u,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Tambah","no-caps":"",icon:"add",color:"green-2",onClick:g})])),_:1})])),_:1}),(0,t.bF)(d,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",H,[(0,t.bF)(p,{height:"80px"})])):((0,t.uX)(),(0,t.CE)("div",J,[i.value.length?((0,t.uX)(),(0,t.Wv)(q,{key:1,bordered:"",separator:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.value,(a=>((0,t.uX)(),(0,t.Wv)(h,{key:a.id,class:"q-my-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(_,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(a.th_ajaran_h)+" | "+(0,n.v_)(a.th_ajaran_m),1)])),_:2},1024),(0,t.bF)(k,{lines:"1"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",Y,(0,n.v_)(a.jabatan),1),(0,t.eW)("; "+(0,n.v_)(a.tingkat)+(0,n.v_)(a.kelas?"; "+a.kelas:"")+" "+(0,n.v_)(a.ruang?"( "+a.ruang+")":""),1)])),_:2},1024),(0,t.bF)(k,{caption:"",class:"text-italic"},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(a.keterangan||"-"),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(_,{side:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{icon:"edit",round:"",dense:"",color:"green",onClick:e=>b(a.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):((0,t.uX)(),(0,t.CE)("div",z,G))]))])),_:1})])),_:1}),(0,t.bF)(f,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(M,{data:c.value,"is-new":v.value,onSuccessSubmit:m,onSuccessDelete:m},null,8,["data","is-new"])])),_:1},8,["modelValue"])],64)}}};var aa=l(981),ea=l(3766),la=l(2589),ta=l(4958),na=l(9039);const sa=Z,ua=sa;Q()(Z,"components",{QCard:_.A,QCardSection:h.A,QToolbar:q.A,QToolbarTitle:F.A,QBtn:f.A,QSkeleton:aa.Ay,QList:ea.A,QItem:la.A,QItemSection:ta.A,QItemLabel:na.A,QDialog:y.A});const ia={class:"row",style:{"max-width":"1200px"}},oa={class:"col-12 col-md-6 q-pa-sm"},da={class:"col-12 col-md-6 q-pa-sm"},ra={__name:"PersonaliaDetail",setup(a){return(a,e)=>{const l=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(l,{class:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ia,[(0,t.Lk)("div",oa,[(0,t.bF)(V)]),(0,t.Lk)("div",da,[(0,t.bF)(ua)])])])),_:1})}}};var ca=l(5013);const va=ra,ma=va;Q()(ra,"components",{QPage:ca.A})}}]);