"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[1835],{61835:(a,e,t)=>{t.r(e),t.d(e,{default:()=>I});var l=t(51347),n=t(37763),s=t(20675),o=t(58094),i=t(34187),d=t(24497),u=t(59678),r=t(90575),p=t(15469);const c=(0,l.Lk)("div",{class:"col text-italic"}," 1) Teliti kembali sebelum Anda menekan tombol Update; 2) Lakukan backup data dengan menekan tombol download!; ",-1),k={__name:"ResultMutasi",setup(a){const e=(0,i.KR)([]),t=(0,i.KR)(!1),k=(0,i.KR)(!1),b=(0,i.KR)({}),{loadingMain:m}=(0,i.QW)((0,r.A)());async function g(){const a=await(0,o.A)({endPoint:"mutasi",loading:t});a&&(e.value=a.mutasi.map((a=>({...a,tk:a.tingkat_id+" "+a.kelas}))))}async function f(a){b.value=a,k.value=!0}async function _(){const a='<hr><span style="color:blue">Update Domisili?</span><hr>\n\t\t<em>\n\t\t\t<strong>Peringatan:</strong>\n\t\t\t<ul style="margin:0">\n\t\t\t\t<li>Pastikan semua keperluan Administrasi (terkait domisili asal) telah selesai!</li>\n\t\t\t\t<li>Sebaiknya data di-download/ diunduh terlebih dahulu sebagai backup!</li>\n\t\t\t\t<li>Setelah update selesai, semua data mutasi akan <strong>dihapus</strong>!</li>\n\t\t\t</ul>\n\t\t</em>',e=await(0,u.A)({endPoint:"mutasi/execute",data:null,loading:t,confirm:!0,message:a});e&&await g()}async function F(){const a=await(0,s.A)({endPoint:"mutasi/clean",loading:t,message:"Hapus semua data mutasi?"});a&&(e.value=[])}async function w(){const a=await(0,o.A)({endPoint:"export/mutasi",loading:m,notify:!0});if(!a)return;if(!a.url)return(0,p.KQ)("Url tidak ditemukan");let e=document.createElement("a");e.href=a.url,e.click(),e.remove()}return(0,l.sV)((async()=>{await g()})),(a,s)=>{const o=(0,l.g2)("q-toolbar-title"),i=(0,l.g2)("q-btn"),u=(0,l.g2)("q-item-label"),r=(0,l.g2)("q-item-section"),p=(0,l.g2)("q-icon"),m=(0,l.g2)("q-item"),A=(0,l.g2)("q-list"),q=(0,l.g2)("q-btn-dropdown"),v=(0,l.g2)("q-toolbar"),y=(0,l.g2)("q-card-section"),h=(0,l.g2)("q-th"),Q=(0,l.g2)("q-tr"),W=(0,l.g2)("q-td"),x=(0,l.g2)("q-table"),C=(0,l.g2)("q-card-actions"),D=(0,l.g2)("q-card"),T=(0,l.g2)("q-dialog"),P=(0,l.g2)("q-page"),S=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(P,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(D,{class:""},{default:(0,l.k6)((()=>[(0,l.bF)(y,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,l.k6)((()=>[(0,l.bF)(o,{class:"text-subtitle1"},{default:(0,l.k6)((()=>[(0,l.eW)(" Data Mutasi Domisili ")])),_:1}),(0,l.bF)(i,{icon:"tune",label:"Atur Mutasi",dense:"",outline:"","no-caps":"",class:"q-mr-xs q-px-sm",to:"/makhadiyah/mutasi/start"}),(0,l.bF)(q,{flat:"",dense:"","dropdown-icon":"more_vert",class:"q-ml-md",color:"green-11"},{default:(0,l.k6)((()=>[(0,l.bF)(A,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(m,{to:"/info/download"},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.eW)("Cetak")])),_:1})])),_:1}),(0,l.bF)(r,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(p,{name:"print",flat:""})])),_:1})])),_:1})),[[S]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(m,{onClick:w,clickable:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.eW)("Unduh/Download")])),_:1})])),_:1}),(0,l.bF)(r,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(p,{name:"download",flat:""})])),_:1})])),_:1})),[[S]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(m,{onClick:F,clickable:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.eW)("Hapus Semua")])),_:1})])),_:1}),(0,l.bF)(r,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(p,{name:"delete_forever",flat:""})])),_:1})])),_:1})),[[S]])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.bF)(y,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(x,{class:"q-pa-sm",rows:e.value,loading:t.value,"rows-per-page-options":[10,25,50,75,100,0],flat:"",bordered:""},{header:(0,l.k6)((a=>[(0,l.bF)(Q,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(h,{key:"santri_id",props:a,class:"text-left"},{default:(0,l.k6)((()=>[(0,l.eW)(" ID Santri ")])),_:2},1032,["props"]),(0,l.bF)(h,{key:"nama",props:a},{default:(0,l.k6)((()=>[(0,l.eW)(" Nama ")])),_:2},1032,["props"]),(0,l.bF)(h,{key:"tk",props:a},{default:(0,l.k6)((()=>[(0,l.eW)(" Tingkat â€” Kelas ")])),_:2},1032,["props"]),(0,l.bF)(h,{key:"domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)(" Domisili (Asal) ")])),_:2},1032,["props"]),(0,l.bF)(h,{key:"new_domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)(" Domisili (Baru) ")])),_:2},1032,["props"]),(0,l.bF)(h,{class:"text-center"})])),_:2},1032,["props"])])),body:(0,l.k6)((a=>[(0,l.bF)(Q,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(W,{key:"santri_id",props:a,class:"text-left"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{label:a.row.santri_id,outline:"",color:"green-10",class:"text-caption q-px-sm",dense:"",to:`/santri/${a.row.santri_id}`},null,8,["label","to"])])),_:2},1032,["props"]),(0,l.bF)(W,{key:"nama",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.nama),1)])),_:2},1032,["props"]),(0,l.bF)(W,{key:"tk",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.tk),1)])),_:2},1032,["props"]),(0,l.bF)(W,{key:"domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.domisili),1)])),_:2},1032,["props"]),(0,l.bF)(W,{key:"new_domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.new_domisili),1)])),_:2},1032,["props"]),(0,l.bF)(W,{key:"id",props:a,class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{icon:"edit",flat:"",color:"green-10",onClick:e=>f(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","loading"])])),_:1}),(0,l.bF)(C,{class:"q-pa-sm bg-green-7 text-green-11 row"},{default:(0,l.k6)((()=>[c,(0,l.bF)(i,{style:{"max-width":"150px"},class:"col bg-green-8 q-ml-md",label:"Update Domisili",glossy:"","no-caps":"",dense:"",outline:"",icon:"settings_applications",disable:!e.value.length>0,onClick:_},null,8,["disable"])])),_:1})])),_:1}),(0,l.bF)(T,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=a=>k.value=a)},{default:(0,l.k6)((()=>[(0,l.bF)(d.A,{data:b.value,api:!0,onOnDelete:g,onOnSubmit:g},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var b=t(75013),m=t(83341),g=t(60222),f=t(66739),_=t(4629),F=t(22677),w=t(73614),A=t(53766),q=t(22589),v=t(14958),y=t(99039),h=t(93933),Q=t(27010),W=t(87339),x=t(22517),C=t(38785),D=t(25034),T=t(30045),P=t(61038),S=t(272),K=t.n(S);const U=k,I=U;K()(k,"components",{QPage:b.A,QCard:m.A,QCardSection:g.A,QToolbar:f.A,QToolbarTitle:_.A,QBtn:F.A,QBtnDropdown:w.A,QList:A.A,QItem:q.A,QItemSection:v.A,QItemLabel:y.A,QIcon:h.A,QTable:Q.A,QTr:W.A,QTh:x.A,QTd:C.A,QCardActions:D.A,QDialog:T.A}),K()(k,"directives",{ClosePopup:P.A})}}]);