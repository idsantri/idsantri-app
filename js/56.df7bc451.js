"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[56],{56:(a,e,l)=>{l.r(e),l.d(e,{default:()=>y});var n=l(1347),t=l(8633),i=l(4187),s=l(1734),u=l(2010),o=l(2734),r=l(575);const d=(0,n.Lk)("div",{tag:"h1",class:"text-subtitle1"},"Download Nilai",-1),c={__name:"DownloadPage",setup(a){const{loadingMain:e}=(0,i.QW)((0,r.A)()),l=(0,i.KR)({}),c=(0,i.KR)([]),p=(0,i.KR)([]),g=[{value:"ujian",label:"Nilai Ujian"},{value:"harian",label:"Nilai Harian"},{value:"rapor",label:"Nilai Rapor"},{value:"ijazah",label:"Nilai Ijazah"}],m=(0,o.A)().getThAjaran;async function h(){const a=JSON.parse(JSON.stringify(l.value)),n=await(0,s.A)({endPoint:"nilai-mapel/export",loading:e,params:a});if(n){let a=document.createElement("a");a.href=n.url,a.click(),a.remove()}}return p.value["th_ajaran"]=m,(0,n.sV)((async()=>{const a=(0,o.A)().getThAjaran;if(p.value["th_ajaran"]=a,0==a.length){const a=await(0,u.HA)({url:"kelas/lists",key:"th_ajaran",loadingArray:c});(0,o.A)().setThAjaran(a),p.value["th_ajaran"]=a}else p.value["th_ajaran"]=a})),(0,n.wB)((()=>l.value.th_ajaran_h),(async a=>{if(l.value.tingkat_id="",l.value.kelas="",a){const e=(0,o.A)().getTingkatByTahun(a);if(e.length)p.value["tingkat"]=e;else{const e=await(0,u.HA)({url:"kelas/lists",params:{th_ajaran_h:a},key:"tingkat",loadingArray:c,sort:"asc"});(0,o.A)().addTingkatToTahun(e,a),p.value["tingkat"]=e}}else p.value["tingkat"]=[];p.value["kelas"]=[]})),(0,n.wB)((()=>l.value.tingkat_id),(async a=>{if(l.value.kelas="",a){const e=(0,o.A)().getKelasByTingkatAndTahun(a,l.value.th_ajaran_h);if(e.length)p.value["kelas"]=e;else{const e=await(0,u.HA)({url:"kelas/lists",params:{th_ajaran_h:l.value.th_ajaran_h,tingkat_id:a},key:"kelas",loadingArray:c,sort:"asc"});(0,o.A)().addKelasToTingkatByTahun(e,a,l.value.th_ajaran_h),p.value["kelas"]=e}}else p.value["kelas"]=[]})),(a,e)=>{const i=(0,n.g2)("q-space"),s=(0,n.g2)("q-btn"),u=(0,n.g2)("q-card-section"),o=(0,n.g2)("q-select"),r=(0,n.g2)("q-input"),m=(0,n.g2)("q-card-actions"),v=(0,n.g2)("q-card"),k=(0,n.g2)("q-form"),b=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(b,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(v,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"q-pa-sm bg-green-8 text-green-11 flex"},{default:(0,n.k6)((()=>[d,(0,n.bF)(i),(0,n.bF)(s,{label:"Kembali",to:"/madrasah/nilai-mapel",dense:"",outline:"","no-caps":"",icon:"arrow_back",class:"q-px-sm q-mr-md"}),(0,n.bF)(s,{label:"Upload",to:"/madrasah/nilai-mapel/upload",dense:"",outline:"","no-caps":"",icon:"upload",class:"q-px-sm"})])),_:1}),(0,n.bF)(u,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(k,{onSubmit:(0,t.D$)(h,["prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(v,{style:{"max-width":"425px"}},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{dense:"",class:"",outlined:"",label:"Tahun Ajaran","emit-value":"","map-options":"",modelValue:l.value.th_ajaran_h,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.th_ajaran_h=a),options:p.value["th_ajaran"],"option-value":"th_ajaran_h","option-label":"th_ajaran_h",clearable:"",behavior:"menu",required:"",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","options","rules"]),(0,n.bF)(o,{dense:"",class:"",outlined:"",label:"Tingkat Pendidikan","emit-value":"","map-options":"","option-value":"tingkat_id","option-label":"tingkat",modelValue:l.value.tingkat_id,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.tingkat_id=a),options:p.value["tingkat"],loading:c.value["tingkat"],clearable:"",behavior:"menu",required:"",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","options","loading","rules"]),(0,n.bF)(o,{dense:"",class:"",outlined:"",label:"Kelas","emit-value":"","map-options":"",modelValue:l.value.kelas,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.kelas=a),options:p.value["kelas"],loading:c.value["kelas"],clearable:"",behavior:"menu",required:"",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","options","loading","rules"]),(0,n.bF)(o,{dense:"",class:"q-mt-sm",outlined:"",label:"Kategori Nilai",modelValue:l.value.category,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.category=a),behavior:"menu",required:"",options:g,"emit-value":"","map-options":"",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,n.bF)(r,{dense:"",class:"q-mt-sm",outlined:"",label:"Ujian Ke",modelValue:l.value.ujian_ke,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.ujian_ke=a),required:"",type:"number",rules:[a=>a>0&&a<5||"antara 1 s.d. 4"]},null,8,["modelValue","rules"])])),_:1}),(0,n.bF)(m,{class:"bg-green-6",align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{class:"",type:"submit",label:"Download",icon:"download",color:"green-11","no-caps":"",outline:"",dense:""})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}};var p=l(5013),g=l(3341),m=l(222),h=l(5873),v=l(2677),k=l(3417),b=l(4611),_=l(6395),A=l(5034),j=l(272),q=l.n(j);const f=c,y=f;q()(c,"components",{QPage:p.A,QCard:g.A,QCardSection:m.A,QSpace:h.A,QBtn:v.A,QForm:k.A,QSelect:b.A,QInput:_.A,QCardActions:A.A})}}]);