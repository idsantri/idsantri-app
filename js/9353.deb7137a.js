"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9353],{9353:(e,a,l)=>{l.r(a),l.d(a,{default:()=>B});var i=l(1347),n=l(4187),t=l(5455),s=l(3336),u=l(528),o=l(9463),d=l(8633),m=l(7763),c=l(2364),r=l(2010),g=l(8158),p=l(6397),v=l(7543);const b={key:0},k={__name:"SantriDomisiliCrud",props:{data:{type:Object,required:!0},isNew:{type:Boolean,default:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,t=a,s=(0,n.KR)({}),u=(0,n.KR)([]),o=(0,n.KR)([]),k=(0,n.KR)(!1);(0,i.sV)((async()=>{Object.assign(s.value,l.data),await(0,r.Mr)({key:"domisili",loading:o,lists:u,sort:!0})}));const _=async()=>{const e={santri_id:s.value.santri_id,domisili:s.value.domisili,keterangan:s.value.keterangan};let a=null;a=l.isNew?await(0,g.A)({endPoint:"domisili",data:e,loading:k}):await(0,p.A)({endPoint:`domisili/${s.value.id}`,data:e,confirm:!0,notify:!0,loading:k}),a&&(document.getElementById("btn-close").click(),t("successSubmit"))},A=async e=>{const a={endPoint:`domisili/${e}`,loading:k},l=await(0,v.A)(a);l&&(document.getElementById("btn-close").click(),t("successDelete"))};return(a,n)=>{const t=(0,i.g2)("q-card-section"),r=(0,i.g2)("q-spinner-cube"),g=(0,i.g2)("q-dialog"),p=(0,i.g2)("q-input"),v=(0,i.g2)("q-select"),f=(0,i.g2)("q-btn"),q=(0,i.g2)("q-space"),F=(0,i.g2)("q-card-actions"),w=(0,i.g2)("q-form"),y=(0,i.g2)("q-card"),S=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.Wv)(y,{class:"full-width",style:{"max-width":"425px"}},{default:(0,i.k6)((()=>[(0,i.bF)(w,{onSubmit:(0,d.D$)(_,["prevent"])},{default:(0,i.k6)((()=>[(0,i.bF)(t,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,i.k6)((()=>[(0,i.bF)(c.A,{onEmitButton:e=>null},{default:(0,i.k6)((()=>[(0,i.eW)((0,m.v_)(l.title)+" â€” ",1),(0,i.Lk)("em",null,(0,m.v_)(e.isNew?"baru":"edit"),1)])),_:1})])),_:1}),(0,i.bF)(t,null,{default:(0,i.k6)((()=>[k.value?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(g,{modelValue:k.value,"onUpdate:modelValue":n[0]||(n[0]=e=>k.value=e),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(r,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,i.Q3)("",!0),(0,i.bF)(p,{dense:"",outlined:"",label:"Nama","model-value":s.value?.nama+" ("+s.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),(0,i.bF)(v,{dense:"",class:"q-mt-sm",outlined:"",label:"Domisili","emit-value":"","map-options":"",modelValue:s.value.domisili,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value.domisili=e),options:u.value["domisili"],loading:o.value["domisili"],behavior:"menu"},null,8,["modelValue","options","loading"]),(0,i.bF)(p,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:s.value.keterangan,"onUpdate:modelValue":n[2]||(n[2]=e=>s.value.keterangan=e),autogrow:""},null,8,["modelValue"])])),_:1}),(0,i.bF)(F,{class:"flex bg-green-6"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(f,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:n[3]||(n[3]=e=>A(s.value.id))},null,512),[[d.aG,!l.isNew]]),(0,i.bF)(q),(0,i.bo)((0,i.bF)(f,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[S]]),(0,i.bF)(f,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var _=l(3341),A=l(3417),f=l(222),q=l(45),F=l(1402),w=l(6395),y=l(4611),S=l(5034),V=l(2677),K=l(5873),Q=l(1038),C=l(272),D=l.n(C);const R=k,h=R;D()(k,"components",{QCard:_.A,QForm:A.A,QCardSection:f.A,QDialog:q.A,QSpinnerCube:F.A,QInput:w.A,QSelect:y.A,QCardActions:S.A,QBtn:V.A,QSpace:K.A}),D()(k,"directives",{ClosePopup:Q.A});var x=l(455),E=l(1734);const I={__name:"SantriDomisili",setup(e){const a=(0,n.KR)(!1),l=(0,n.KR)(!1),d=(0,n.KR)({}),m=(0,n.KR)([]),c=(0,n.KR)([]),r=(0,n.KR)(!1),g=(0,n.KR)({}),p=(0,x.lq)(),v=p.params.id;async function b(){const e=await(0,E.A)({endPoint:`santri/${v}/domisili`,loading:a});c.value=e.domisili,m.value=e.domisili.map((e=>({Tanggal:(0,s.kz)(e.date_m)+" | "+(0,u.jh)(e.date_m),Domisili:e.domisili,Keterangan:e.keterangan||"-",id:e.id}))),g.value=e.santri}(0,i.sV)((async()=>{await b()}));const k=()=>{d.value={santri_id:g.value.id,nama:g.value.nama},r.value=!0,l.value=!0},_=({id:e})=>{d.value=(0,o.I)(c,e),d.value.santri_id=g.value.id,d.value.nama=g.value.nama,r.value=!1,l.value=!0};return(e,n)=>{const s=(0,i.g2)("q-dialog");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(t.A,{data:m.value,spinner:a.value,onAdd:k,onEdit:_},null,8,["data","spinner"]),(0,i.bF)(s,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value=e)},{default:(0,i.k6)((()=>[(0,i.bF)(h,{data:d.value,"is-new":r.value,title:"Input Domisili",onSuccessSubmit:b,onSuccessDelete:b},null,8,["data","is-new"])])),_:1},8,["modelValue"])])}}},N=I,B=N;D()(I,"components",{QDialog:q.A})}}]);