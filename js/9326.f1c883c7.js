"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9326],{79326:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var l=t(51347),n=t(34187),s=t(95455),u=t(23336),i=t(30528),d=t(69463),o=t(8633),c=t(59678),r=t(47509),m=t(20675),p=t(39987),b=t(90486);const v={key:0},g={__name:"SantriStatusCrud",props:{data:{type:Object,required:!0},isNew:{type:Boolean,default:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const t=e,s=a,u=(0,n.KR)({}),i=(0,n.KR)(!1);(0,l.sV)((async()=>{Object.assign(u.value,t.data)}));const d=async()=>{const e={santri_id:u.value.santri_id,status:u.value.status,keterangan:u.value.keterangan};let a=null;a=t.isNew?await(0,c.A)({endPoint:"status",data:e,loading:i}):await(0,r.A)({endPoint:`status/${u.value.id}`,data:e,confirm:!0,notify:!0,loading:i}),a&&(document.getElementById("btn-close").click(),s("successSubmit"))},g=async e=>{const a={endPoint:`status/${e}`,loading:i},t=await(0,m.A)(a);t&&(document.getElementById("btn-close").click(),s("successDelete"))};return(a,n)=>{const s=(0,l.g2)("q-spinner-cube"),c=(0,l.g2)("q-dialog"),r=(0,l.g2)("q-input"),m=(0,l.g2)("q-card-section"),k=(0,l.g2)("q-btn"),A=(0,l.g2)("q-space"),_=(0,l.g2)("q-card-actions"),S=(0,l.g2)("q-form"),f=(0,l.g2)("q-card"),w=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(f,{class:"full-width",style:{"max-width":"425px"}},{default:(0,l.k6)((()=>[(0,l.bF)(S,{onSubmit:(0,o.D$)(d,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(p.A,{title:t.title,"is-new":e.isNew},null,8,["title","is-new"]),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[i.value?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.bF)(c,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(s,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.bF)(r,{dense:"",outlined:"",label:"Nama","model-value":u.value?.nama+" ("+u.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),(0,l.bF)(b.A,{modelValue:u.value.status,"onUpdate:modelValue":n[1]||(n[1]=e=>u.value.status=e),url:"status",label:"Status",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(b.A,{modelValue:u.value.keterangan,"onUpdate:modelValue":n[2]||(n[2]=e=>u.value.keterangan=e),url:"keterangan-status",label:"Keterangan",class:"q-mt-sm"},null,8,["modelValue"])])),_:1}),(0,l.bF)(_,{class:"flex bg-green-6"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(k,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:n[3]||(n[3]=e=>g(u.value.id))},null,512),[[o.aG,!t.isNew]]),(0,l.bF)(A),(0,l.bo)((0,l.bF)(k,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[w]]),(0,l.bF)(k,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var k=t(83341),A=t(53417),_=t(60222),S=t(30045),f=t(71402),w=t(46395),F=t(25034),q=t(22677),y=t(5873),V=t(61038),C=t(272),K=t.n(C);const Q=g,R=Q;K()(g,"components",{QCard:k.A,QForm:A.A,QCardSection:_.A,QDialog:S.A,QSpinnerCube:f.A,QInput:w.A,QCardActions:F.A,QBtn:q.A,QSpace:y.A}),K()(g,"directives",{ClosePopup:V.A});var h=t(60455),x=t(58094);const D={__name:"SantriStatus",setup(e){const a=(0,n.KR)(!1),t=(0,n.KR)(!1),o=(0,n.KR)({}),c=(0,n.KR)([]),r=(0,n.KR)([]),m=(0,n.KR)(!1),p=(0,n.KR)({}),b=(0,h.lq)(),v=b.params.id;async function g(){const e=await(0,x.A)({endPoint:`santri/${v}/status`,loading:a});r.value=e.status,c.value=e.status.map((e=>({Tanggal:(0,u.kz)(e.date_m)+" | "+(0,i.jh)(e.date_m),Status:e.status,Keterangan:e.keterangan||"-",id:e.id}))),p.value=e.santri}(0,l.sV)((async()=>{await g()}));const k=()=>{o.value={santri_id:p.value.id,nama:p.value.nama},m.value=!0,t.value=!0},A=({id:e})=>{o.value=(0,d.I$)(r,e),o.value.santri_id=p.value.id,o.value.nama=p.value.nama,m.value=!1,t.value=!0};return(e,n)=>{const u=(0,l.g2)("q-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(s.A,{data:c.value,spinner:a.value,onAdd:k,onEdit:A},null,8,["data","spinner"]),(0,l.bF)(u,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=e=>t.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(R,{data:o.value,"is-new":m.value,title:"Input Status",onSuccessSubmit:g,onSuccessDelete:g},null,8,["data","is-new"])])),_:1},8,["modelValue"])])}}},I=D,N=I;K()(D,"components",{QDialog:S.A})}}]);