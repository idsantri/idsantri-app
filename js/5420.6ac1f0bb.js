"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5420],{25420:(e,a,l)=>{l.r(a),l.d(a,{default:()=>P});l(67590);var n=l(51347),o=l(34187),i=l(47543),s=l(21734),t=l(6397),u=l(783);const d=(0,n.Lk)("div",{class:"text-h6 text-green-10"},"Data Pengguna",-1),r=(0,n.Lk)("div",{class:"text-subtitle1"},"Data User",-1),m={class:"row"},c={class:"col-md-6 col-sm-12"},b=(0,n.Lk)("div",{class:"q-pl-md text-caption"}," Verifikasi akun hanya bisa dilakukan oleh user yang bersangkutan. ",-1),f={class:"col-md-6 col-sm-12"},v=(0,n.Lk)("div",{class:"q-pl-md text-caption"}," Konfimasi bahwa Anda mengenal user ini. ",-1),g={class:"row"},p={__name:"UserPage",setup(e){const a=(0,o.KR)(!1),l=(0,o.KR)(""),p=(0,o.KR)(!1),k=(0,o.KR)([]),V=(0,o.KR)({}),w=[{name:"name",label:"Nama",align:"left",field:"name",sortable:!0},{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"email",label:"Email",align:"left",field:"email",sortable:!0},{name:"group",label:"Group",align:"left",field:e=>{const a=[];for(const[l,n]of Object.entries(e.roles))1==n&&a.push(l);return a.join(", ")},sortable:!0},{name:"confirmed_at",label:"Konfirmasi",align:"left",field:"confirmed_at",format:e=>""+(e?"Ya":"Tidak"),sortable:!0},{name:"verified",label:"Verikasi",align:"left",field:"email_verified_at",format:e=>""+(e?"Ya":"Tidak"),sortable:!0}];async function F(){const e=await(0,s.A)({endPoint:"users",loading:p});k.value=e.users}function C(e,l){a.value=!0,V.value=l,V.value.isConfirmed=!!l.confirmed_at}async function _(e){const a={confirm:e},l=V.value.id,n=await(0,t.A)({endPoint:`users/${l}/confirm`,data:a});if(!n)return V.value.isConfirmed=!V.value.isConfirmed;await F()}async function A(){const e=V.value.id;await(0,i.A)({endPoint:`users/${e}`,rerender:!0})}async function q(e,a,l){V.value.roles[a]=l;const n={role:a,value:l},o=await(0,t.A)({endPoint:`users/${e}/roles`,data:n});if(!o)return V.value.roles[a]=!l;await F()}return(0,n.sV)((async()=>{await F()})),(e,i)=>{const s=(0,n.g2)("q-icon"),t=(0,n.g2)("q-input"),F=(0,n.g2)("q-table"),h=(0,n.g2)("q-space"),y=(0,n.g2)("q-btn"),Q=(0,n.g2)("q-card-section"),U=(0,n.g2)("q-toggle"),x=(0,n.g2)("q-card-actions"),K=(0,n.g2)("q-card"),L=(0,n.g2)("q-dialog"),P=(0,n.g2)("q-page"),R=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.Wv)(P,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(F,{rows:k.value,columns:w,"row-key":"name",loading:p.value,filter:l.value,onRowClick:i[1]||(i[1]=(e,a,l)=>C(e,a,l))},{"top-left":(0,n.k6)((()=>[d])),"top-right":(0,n.k6)((()=>[(0,n.bF)(t,{outlined:"",dense:"",debounce:"300",modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=e=>l.value=e),placeholder:"Cari"},{append:(0,n.k6)((()=>[(0,n.bF)(s,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","loading","filter"]),(0,n.bF)(L,{modelValue:a.value,"onUpdate:modelValue":i[7]||(i[7]=e=>a.value=e)},{default:(0,n.k6)((()=>[(0,n.bF)(K,{style:{width:"700px","max-width":"90vw"}},{default:(0,n.k6)((()=>[(0,n.bF)(Q,{class:"bg-green-8 text-green-11 q-pa-sm row items-center"},{default:(0,n.k6)((()=>[r,(0,n.bF)(h),(0,n.bo)((0,n.bF)(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[R]])])),_:1}),(0,n.bF)(Q,{class:"q-gutter-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(t,{standout:"",modelValue:V.value.name,"onUpdate:modelValue":i[2]||(i[2]=e=>V.value.name=e),label:"Nama",readonly:""},null,8,["modelValue"]),(0,n.bF)(t,{standout:"",modelValue:V.value.username,"onUpdate:modelValue":i[3]||(i[3]=e=>V.value.username=e),label:"Username",readonly:""},null,8,["modelValue"]),(0,n.bF)(t,{standout:"",modelValue:V.value.email,"onUpdate:modelValue":i[4]||(i[4]=e=>V.value.email=e),label:"Email",readonly:""},null,8,["modelValue"]),(0,n.Lk)("div",m,[(0,n.Lk)("div",c,[(0,n.bF)(U,{"model-value":!!V.value.email_verified_at,label:"Verifikasi",disable:"",color:"green"},null,8,["model-value"]),b]),(0,n.Lk)("div",f,[(0,n.bF)(U,{modelValue:V.value.isConfirmed,"onUpdate:modelValue":i[5]||(i[5]=e=>V.value.isConfirmed=e),label:"Konfirmasi",onClick:i[6]||(i[6]=e=>_(V.value.isConfirmed)),color:"green"},null,8,["modelValue"]),v])])])),_:1}),(0,n.bF)(Q,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(V.value.roles,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"col-md-6 col-sm-12",key:a},[(0,n.bF)(U,{style:{"min-width":"150px"},label:(0,o.R1)(u.Zj)(a),"model-value":e,onClick:l=>q(V.value.id,a,!e),color:"green"},null,8,["label","model-value","onClick"])])))),128))])])),_:1}),(0,n.bF)(x,{class:"bg-green-7 q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(y,{label:"Hapus",color:"negative","no-caps":"",onClick:A}),(0,n.bF)(h),(0,n.bo)((0,n.bF)(y,{label:"Tutup","no-caps":"",color:"green-10"},null,512),[[R]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var k=l(75013),V=l(27010),w=l(46395),F=l(93933),C=l(30045),_=l(83341),A=l(60222),q=l(5873),h=l(22677),y=l(55725),Q=l(25034),U=l(61038),x=l(272),K=l.n(x);const L=p,P=L;K()(p,"components",{QPage:k.A,QTable:V.A,QInput:w.A,QIcon:F.A,QDialog:C.A,QCard:_.A,QCardSection:A.A,QSpace:q.A,QBtn:h.A,QToggle:y.A,QCardActions:Q.A}),K()(p,"directives",{ClosePopup:U.A})}}]);