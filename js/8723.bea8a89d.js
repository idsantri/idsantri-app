"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8723],{8723:(e,a,l)=>{l.r(a),l.d(a,{default:()=>N});var t=l(1347),n=l(7763),u=l(1734),o=l(2010),d=l(4187),i=l(8633),s=l(2364),r=l(6397),c=l(8158),m=l(7543);const p={key:0},g={__name:"MapelCrud",props:{data:{type:Object,required:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,u=a,g=(0,d.KR)({category:"Fan Dasar",show:1}),b=(0,d.KR)([]),k=(0,d.KR)([]),v=(0,d.KR)(!1);(0,t.sV)((async()=>{Object.assign(g.value,l.data),await(0,o.nQ)({key:"tingkat-pendidikan",loading:k,lists:b,sort:!0})}));const F=async()=>{const e={urut:g.value.urut,id:g.value.id.toLowerCase(),tingkat_id:g.value.tingkat_id,mapel:g.value.mapel,mata_pelajaran:g.value.mata_pelajaran,category:g.value.category,show:g.value.show};let a=null;a=l.data.id?await(0,r.A)({endPoint:`mapel/${l.data.id}`,data:e,confirm:!0,notify:!0,loading:v}):await(0,c.A)({endPoint:"mapel",data:e,loading:v}),a&&(document.getElementById("btn-close-crud").click(),u("successSubmit"))},_=async()=>{const e=await(0,m.A)({endPoint:`mapel/${l.data.id}`,loading:v,rerender:!1});e&&(document.getElementById("btn-close-crud").click(),u("successDelete"))};return(e,a)=>{const u=(0,t.g2)("q-card-section"),o=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-dialog"),r=(0,t.g2)("q-input"),c=(0,t.g2)("q-select"),m=(0,t.g2)("q-toggle"),q=(0,t.g2)("q-card"),h=(0,t.g2)("q-btn"),f=(0,t.g2)("q-space"),V=(0,t.g2)("q-card-actions"),y=(0,t.g2)("q-form"),A=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(q,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(y,{onSubmit:(0,i.D$)(F,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(s.A,{onEmitButton:e=>null},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(l.title)+" — ",1),(0,t.Lk)("em",null,(0,n.v_)(g.value.id?"edit":"baru"),1)])),_:1})])),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[v.value?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.bF)(d,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(o,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(r,{dense:"",outlined:"",label:"Urut",modelValue:g.value.urut,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value.urut=e),hint:"Nomor urut tampil"},null,8,["modelValue"]),(0,t.bF)(r,{class:"q-mt-sm",dense:"",outlined:"",label:"Kode/ID Mapel",modelValue:g.value.id,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.id=e),hint:"Format: tingkat_id—kode_mapel (ibt-qur)"},null,8,["modelValue"]),(0,t.bF)(c,{dense:"",class:"q-mt-sm",outlined:"",label:"Tingkat Pendidikan","emit-value":"","map-options":"",modelValue:g.value.tingkat_id,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value.tingkat_id=e),options:b.value["tingkat-pendidikan"],loading:k.value["tingkat-pendidikan"],clearable:"",behavior:"menu","option-value":"val0","option-label":"val1"},null,8,["modelValue","options","loading"]),(0,t.bF)(r,{dense:"",class:"q-mt-sm",outlined:"",label:"Mata Pelajaran",modelValue:g.value.mapel,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value.mapel=e),hint:"Hanya huruf dan spasi"},null,8,["modelValue"]),(0,t.bF)(r,{dense:"",class:"q-mt-sm",outlined:"",label:"Mata Pelajaran (Alias)",modelValue:g.value.mata_pelajaran,"onUpdate:modelValue":a[5]||(a[5]=e=>g.value.mata_pelajaran=e)},null,8,["modelValue"]),(0,t.bF)(c,{dense:"",class:"q-mt-sm",outlined:"",label:"Kategori Fan","emit-value":"","map-options":"",modelValue:g.value.category,"onUpdate:modelValue":a[6]||(a[6]=e=>g.value.category=e),options:["Fan Pokok","Fan Dasar","Fan Tambahan"],behavior:"menu"},null,8,["modelValue"]),(0,t.bF)(q,{bordered:"",flat:"",class:"q-px-sm q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.eW)(" Tampilkan: "),(0,t.bF)(m,{modelValue:g.value.show,"onUpdate:modelValue":a[7]||(a[7]=e=>g.value.show=e),color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(V,{class:"flex bg-green-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(h,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:_},null,512),[[i.aG,g.value.id]]),(0,t.bF)(f),(0,t.bo)((0,t.bF)(h,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close-crud"},null,512),[[A]]),(0,t.bF)(h,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var b=l(3341),k=l(3417),v=l(222),F=l(45),_=l(1402),q=l(6395),h=l(4611),f=l(5725),V=l(5034),y=l(2677),A=l(5873),Q=l(1038),x=l(272),L=l.n(x);const w=g,C=w;L()(g,"components",{QCard:b.A,QForm:k.A,QCardSection:v.A,QDialog:F.A,QSpinnerCube:_.A,QInput:q.A,QSelect:h.A,QToggle:f.A,QCardActions:V.A,QBtn:y.A,QSpace:A.A}),L()(g,"directives",{ClosePopup:Q.A});const P=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"text-left"},[(0,t.Lk)("th",null,"No"),(0,t.Lk)("th",null,"Kode/ID"),(0,t.Lk)("th",null,"Mapel"),(0,t.Lk)("th",null,"Mata Pelajaran"),(0,t.Lk)("th",null,"Status Fan"),(0,t.Lk)("th",null,"Tampil"),(0,t.Lk)("th",{class:"text-center"},"Edit")])],-1),S={key:0},T={colspan:"5"},K={key:1},j=(0,t.Lk)("td",{colspan:"5",class:"text-center text-green-10 text-italic"},[(0,t.eW)(" — Tidak ada data untuk ditampilkan — "),(0,t.Lk)("br"),(0,t.eW)(" — Pilih Tingkat Pendidikan — ")],-1),D=[j],M={class:"text-center"},R={__name:"MapelIndex",setup(e){const a=(0,d.KR)([]),l=(0,d.KR)(""),i=(0,d.KR)(!1),s=(0,d.KR)([]),r=(0,d.KR)([]),c=(0,d.KR)({}),m=(0,d.KR)(!1);async function p(){const e=await(0,u.A)({endPoint:"mapel",loading:i,params:{tingkat_id:l.value}});a.value=e.mapel}function g(e){c.value=e,m.value=!0}function b(){c.value={},m.value=!0}return(0,t.sV)((async()=>{await(0,o.nQ)({key:"tingkat-pendidikan",loading:r,lists:s,sort:!0})})),(0,t.wB)(l,(async()=>{await p()})),(e,u)=>{const o=(0,t.g2)("q-toolbar-title"),d=(0,t.g2)("q-btn"),k=(0,t.g2)("q-select"),v=(0,t.g2)("q-toolbar"),F=(0,t.g2)("q-card-section"),_=(0,t.g2)("q-skeleton"),q=(0,t.g2)("q-toggle"),h=(0,t.g2)("q-markup-table"),f=(0,t.g2)("q-card"),V=(0,t.g2)("q-dialog"),y=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(y,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[(0,t.bF)(F,{class:"bg-green-8 text-green-11 q-px-sm q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"text-subtitle1"},{default:(0,t.k6)((()=>[(0,t.eW)(" Daftar Mata Pelajaran ")])),_:1}),(0,t.bF)(d,{label:"Nilai Mapel",to:"/madrasah/nilai-mapel",dense:"",outline:"","no-caps":"",icon:"arrow_back",class:"q-px-sm q-mr-md"}),(0,t.bF)(d,{class:"q-mr-sm text-green-10",label:"Baru",icon:"add","no-caps":"",color:"green-11",onClick:b}),(0,t.bF)(k,{style:{width:"200px"},dense:"","bg-color":"green-1",outlined:"",label:"Tingkat Pendidikan",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),options:s.value["tingkat-pendidikan"],"option-value":"val0","option-label":"val1","emit-value":"","map-options":"",loading:r.value["tingkat-pendidikan"],behavior:"menu"},null,8,["modelValue","options","loading"])])),_:1})])),_:1}),(0,t.bF)(F,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{flat:""},{default:(0,t.k6)((()=>[P,(0,t.Lk)("tbody",null,[i.value?((0,t.uX)(),(0,t.CE)("tr",S,[(0,t.Lk)("td",T,[(0,t.bF)(_,{height:"50px"})])])):0==a.value.length?((0,t.uX)(),(0,t.CE)("tr",K,D)):((0,t.uX)(!0),(0,t.CE)(t.FK,{key:2},(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,n.v_)(e.urut),1),(0,t.Lk)("td",null,(0,n.v_)(e.id),1),(0,t.Lk)("td",null,(0,n.v_)(e.mapel),1),(0,t.Lk)("td",null,(0,n.v_)(e.mata_pelajaran),1),(0,t.Lk)("td",null,(0,n.v_)(e.category),1),(0,t.Lk)("td",null,[(0,t.bF)(q,{"model-value":!!e.show,color:"green",disable:""},null,8,["model-value"])]),(0,t.Lk)("td",M,[(0,t.bF)(d,{icon:"edit",flat:"",color:"green",onClick:a=>g(e)},null,8,["onClick"])])])))),128))])])),_:1})])),_:1})])),_:1}),(0,t.bF)(V,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=e=>m.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(C,{data:c.value,title:"Input Mata Pelajaran",onSuccessSubmit:p,onSuccessDelete:p},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var U=l(5013),E=l(6739),I=l(4629),B=l(4362),W=l(981);const X=R,N=X;L()(R,"components",{QPage:U.A,QCard:b.A,QCardSection:v.A,QToolbar:E.A,QToolbarTitle:I.A,QBtn:y.A,QSelect:h.A,QMarkupTable:B.A,QSkeleton:W.Ay,QToggle:f.A,QDialog:F.A})}}]);