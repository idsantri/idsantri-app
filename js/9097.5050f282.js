"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9097],{9097:(a,e,n)=>{n.r(e),n.d(e,{default:()=>C});n(7590);var t=n(1347),l=n(7763),s=n(1734),i=n(6397),o=n(842),r=n(5469),d=n(4187),p=n(455);const m=a=>((0,t.Qi)("data-v-37324edb"),a=a(),(0,t.jt)(),a),b=["innerHTML"],u=m((()=>(0,t.Lk)("div",{class:"text-h6 text-green-10"},"Data Murid",-1))),k={__name:"AbsensiPenomoran",setup(a){const e=(0,d.KR)(!1),n=(0,p.lq)(),m=(0,d.KR)([]),k=(0,d.KR)({}),c={thAjaranH:n.params.thAjaranH,tingkatId:n.params.tingkatId,kelas:n.params.kelas};function g(a){k.value=a}async function _(){const a=await(0,r.Ix)("Isi nomor Absen secara otomatis");if(!a)return;const e=document.getElementsByClassName("kelas-id"),n=[...e];let t=1;n.forEach((a=>{const e=a.innerText,n=m.value.findIndex((a=>a.id==e));m.value[n].no_absen=t,t++})),(0,r.KQ)("Isi otomatis berhasil! <br/>Data belum diupdate sampai Anda menekan tombol kirim!")}async function f(){const a=m.value.map((({id:a,no_absen:e})=>({id:a,no_absen:e}))),n=await(0,i.A)({endPoint:"kelas/no-absen",data:a,loading:e,confirm:!0});n&&(m.value=n.murid)}(0,t.sV)((async()=>{if(c.thAjaranH&&c.tingkatId&&c.kelas){const a=await(0,s.A)({endPoint:`murid/${c.thAjaranH}/${c.tingkatId}/${c.kelas}`,loading:e});m.value=a.murid}else m.value=[]}));const h=[{name:"id",label:"ID Kelas",align:"left",field:"id",sortable:!0},{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"no_absen",label:"No Absen",align:"center",field:"no_absen",sortable:!0,style:"width:44px",classes:"text-center"},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"domisili",label:"Dom.",align:"left",field:"domisili",sortable:!0},{name:"alamat_pendek",label:"Alamat",align:"left",field:"alamat_pendek",sortable:!0,classes:"alamat"}];return(a,n)=>{const s=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-btn"),r=(0,t.g2)("q-td"),d=(0,t.g2)("q-input"),p=(0,t.g2)("q-tr"),c=(0,t.g2)("q-table"),w=(0,t.g2)("q-card-actions"),x=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(o.A,{showBulanUjian:!1,"start-url":"/madrasah/absensi/penomoran",onDataFilter:g}),(0,t.bF)(x,{class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"bg-green-7 text-green-1 text-subtitle1 q-pa-sm flex"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{innerHTML:k.value.display||"Tentukan filter!"},null,8,b)])),_:1}),(0,t.bF)(s,{class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{rows:m.value,columns:h,loading:e.value,"rows-per-page-options":[0],class:"dt q-pa-sm","no-data-label":"Silakan tentukan Tahun ajaran, tingkat pendidikan, dan kelas!","row-key":"name",flat:"","hide-pagination":""},{"top-left":(0,t.k6)((()=>[u])),"top-right":(0,t.k6)((()=>[(0,t.bF)(i,{label:"Isi Otomatis",dense:"","no-caps":"",class:"q-px-md text-green-10",color:"green-11",icon:"auto_fix_high",onClick:_,disable:0==m.value.length,title:"Isi otomatis nomor absen"},null,8,["disable"])])),body:(0,t.k6)((e=>[(0,t.bF)(p,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(r,{key:"id",props:e,class:"kelas-id"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:n=>a.$router.push(`/madrasah/kelas/${e.row.id}/riwayat`)},{default:(0,t.k6)((()=>[(0,t.Lk)("small",null,(0,l.v_)(e.row.id),1)])),_:2},1032,["onClick"])])),_:2},1032,["props"]),(0,t.bF)(r,{key:"santri_id",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.santri_id),1)])),_:2},1032,["props"]),(0,t.bF)(r,{key:"no_absen",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(d,{outlined:"",dense:"",modelValue:e.row.no_absen,"onUpdate:modelValue":a=>e.row.no_absen=a,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.bF)(r,{key:"nama",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.nama)+" ("+(0,l.v_)(e.row.sex)+") ",1)])),_:2},1032,["props"]),(0,t.bF)(r,{key:"domisili",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.domisili),1)])),_:2},1032,["props"]),(0,t.bF)(r,{key:"alamat_pendek",props:e,title:e.row.alamat_pendek},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.alamat_pendek.length>30?e.row.alamat_pendek.substr(0,30)+"â€¦":e.row.alamat_pendek),1)])),_:2},1032,["props","title"])])),_:2},1032,["props"])])),_:1},8,["rows","loading"])])),_:1}),(0,t.bF)(w,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm flex",align:"right"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{dense:"",label:"Kirim","no-caps":"",color:"green-11",class:"text-green-10 q-px-md",onClick:f})])),_:1})])),_:1})],64)}}};var c=n(2968),g=n(3341),_=n(222),f=n(5873),h=n(2677),w=n(7010),x=n(7339),A=n(8785),v=n(6067),F=n(5034),q=n(272),y=n.n(q);const I=(0,c.A)(k,[["__scopeId","data-v-37324edb"]]),C=I;y()(k,"components",{QCard:g.A,QCardSection:_.A,QSpace:f.A,QBtn:h.A,QTable:w.A,QTr:x.A,QTd:A.A,QInput:v.A,QCardActions:F.A})}}]);