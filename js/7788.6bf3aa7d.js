"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[7788],{37788:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ue});t(54227),t(91645),t(29400),t(35373),t(71470),t(15701),t(85801);var l=t(51347),n=t(37763),u=t(34187),s=t(58094),i=t(8633),o=t(76162),d=t(20675),r=t(47509),c=t(59678),m=t(52364),b=t(21209),p=t(90486);t(63983);const k={key:0},g={__name:"SettingCrud",props:{data:{type:Object,required:!1,default:()=>{}},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const t=e,s=a,g=(0,u.KR)({qty:1}),v=(0,u.KR)(!1),f=(0,u.KR)([]);(0,l.sV)((async()=>{Object.assign(g.value,t.data),f.value=(0,o.A)().getByStateName("iuran")}));const q=e=>{const a=f.value.find((a=>a.val0===e));a&&(g.value.nominal=a.val1)},x=async()=>{const e=JSON.parse(JSON.stringify(g.value));delete e.id;let a=null;a=g.value.id?await(0,r.A)({endPoint:`iuran-paket/${g.value.id}`,data:e,confirm:!0,notify:!0,loading:v}):await(0,c.A)({endPoint:"iuran-paket",data:e,loading:v}),a&&(document.getElementById("btn-close").click(),s("successSubmit",a?.iuran_paket))},y=async()=>{const e=await(0,d.A)({endPoint:`iuran-paket/${g.value.id}`,loading:v});e&&(document.getElementById("btn-close").click(),s("successDelete"))};return(e,a)=>{const u=(0,l.g2)("q-card-section"),s=(0,l.g2)("q-spinner-cube"),o=(0,l.g2)("q-dialog"),d=(0,l.g2)("q-input"),r=(0,l.g2)("q-btn"),c=(0,l.g2)("q-space"),f=(0,l.g2)("q-card-actions"),h=(0,l.g2)("q-form"),F=(0,l.g2)("q-card"),_=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(F,{class:"full-width",style:{"max-width":"425px"}},{default:(0,l.k6)((()=>[(0,l.bF)(h,{onSubmit:(0,i.D$)(x,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(m.A,{onEmitButton:e=>null},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(t.title)+" — ",1),(0,l.Lk)("em",null,(0,n.v_)(g.value.id?"edit":"baru"),1)])),_:1})])),_:1}),(0,l.bF)(u,null,{default:(0,l.k6)((()=>[v.value?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(o,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(s,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.bF)(d,{dense:"",class:"",outlined:"",modelValue:g.value.urut,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value.urut=e),label:"Nomor Urut",rules:[e=>!e||!isNaN(e)||"Hanya angka"]},null,8,["modelValue","rules"]),(0,l.bF)(d,{dense:"",class:"q-mt-sm",outlined:"",modelValue:g.value.paket,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.paket=e),required:"",label:"Nama Paket",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(p.A,{modelValue:g.value.iuran,"onUpdate:modelValue":[a[3]||(a[3]=e=>g.value.iuran=e),q],url:"iuran",label:"Iuran",class:"q-mt-sm"},null,8,["modelValue"]),(0,l.bF)(b.A,{dense:"",class:"q-mt-sm",outlined:"",modelValue:g.value.nominal,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value.nominal=e),required:"",label:"Nominal",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(d,{hint:"Untuk pecahan: awali/gunakan titik (.25 atau 0.25, .5 atau 0.5, …)",dense:"",class:"q-mt-sm",outlined:"",modelValue:g.value.qty,"onUpdate:modelValue":a[5]||(a[5]=e=>g.value.qty=e),required:"",label:"Quantity",rules:[e=>!!e||"Harus diisi!",e=>!e||!isNaN(e)||"Hanya angka",e=>e>0||"Harus lebih besar dari 0"]},null,8,["modelValue","rules"]),(0,l.bF)(d,{disable:"",filled:"",dense:"",class:"q-mt-sm",outlined:"",label:"Sub Total","model-value":(Number(g.value.qty)*Number(g.value.nominal)).toRupiah()},null,8,["model-value"])])),_:1}),(0,l.bF)(f,{class:"flex bg-green-6"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(r,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:a[6]||(a[6]=e=>y())},null,512),[[i.aG,g.value.id]]),(0,l.bF)(c),(0,l.bo)((0,l.bF)(r,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[_]]),(0,l.bF)(r,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var v=t(83341),f=t(53417),q=t(60222),x=t(30045),y=t(71402),h=t(46395),F=t(25034),_=t(22677),A=t(5873),L=t(61038),V=t(272),S=t.n(V);const C=g,Q=C;S()(g,"components",{QCard:v.A,QForm:f.A,QCardSection:q.A,QDialog:x.A,QSpinnerCube:y.A,QInput:h.A,QCardActions:F.A,QBtn:_.A,QSpace:A.A}),S()(g,"directives",{ClosePopup:L.A});const N={class:"flex items-center"},w=(0,l.Lk)("div",{class:"text-subtitle1"},"Pengaturan Paket Iuran",-1),P=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"text-center"},"No"),(0,l.Lk)("th",{class:"text-left"},"Nama Paket"),(0,l.Lk)("th",{class:"text-left"},"Iuran"),(0,l.Lk)("th",{class:"text-right"},"Nominal"),(0,l.Lk)("th",{class:"text-right"},"Qty"),(0,l.Lk)("th",{class:"text-right"},"Total"),(0,l.Lk)("th",{class:"text-center"},"Edit")])],-1),R={key:0},E={colspan:"7",class:"text-center bg-grey-1 no-padding"},I={key:1},K=(0,l.Lk)("td",{colspan:"7",class:"text-center text-italic text-negative bg-red-2"},[(0,l.eW)(" Tidak ada data untuk ditampikan!"),(0,l.Lk)("br"),(0,l.eW)(" Silakan Tambahkan data baru! ")],-1),U=[K],T={key:2},B=(0,l.Lk)("td",{colspan:"7",class:"text-center text-italic text-negative bg-red-1"}," Pilih filter! ",-1),X=[B],H={class:"text-center"},D={class:"text-left"},W={class:"text-left"},O={class:"text-right"},$={class:"text-right"},j={class:"text-right"},z={class:"text-center"},J={class:"bg-green-1"},M=(0,l.Lk)("td",{class:"text-right text-italic",colspan:"5"}," Total ",-1),G={class:"text-right text-bold"},Y=(0,l.Lk)("td",{class:"text-center"},null,-1),Z={__name:"SettingPaket",setup(e){const a=(0,u.KR)(!1),t=(0,u.KR)([]),i=(0,u.KR)(""),o=(0,u.KR)(!1),d=(0,u.KR)({});async function r(){const e=await(0,s.A)({endPoint:"iuran-paket",loading:a});e&&(t.value=e.iuran_paket)}function c(){const e=t.value.map((e=>e.paket));return Array.from(new Set(e))}function m(){return t.value.filter((e=>e.paket==i.value))}function b(){return m().reduce((function(e,a){return e+Number(a.nominal)*Number(a.qty)}),0)}function p(){d.value={paket:i.value},o.value=!0}function k(e){d.value=e,o.value=!0}return(0,l.sV)((async()=>{await r()})),(e,u)=>{const s=(0,l.g2)("q-space"),g=(0,l.g2)("q-btn"),v=(0,l.g2)("q-card-section"),f=(0,l.g2)("q-select"),q=(0,l.g2)("q-spinner-facebook"),x=(0,l.g2)("q-markup-table"),y=(0,l.g2)("q-card"),h=(0,l.g2)("q-dialog"),F=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(F,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{class:"",style:{"max-width":"800px"}},{default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",N,[w,(0,l.bF)(s),(0,l.bF)(g,{dense:"",outline:"",flat:"",icon:"reply",class:"q-px-sm q-mr-md",onClick:u[0]||(u[0]=a=>e.$router.go(-1)),title:"Kembali"}),(0,l.bF)(g,{icon:"sync","no-caps":"",onClick:r,dense:"",flat:"",class:"q-px-sm",title:"Muat ulang"})])])),_:1}),(0,l.bF)(v,{class:"q-pa-sm flex justify-between"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{label:"Pilih nama paket",dense:"",outlined:"",options:c(),loading:a.value,modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=e=>i.value=e),clearable:"",style:{width:"250px","min-width":"200px"}},null,8,["options","loading","modelValue"]),(0,l.bF)(g,{dense:"",icon:"add",label:"Baru",color:"green-10","no-caps":"",outline:"",class:"q-px-sm",title:"Buat/tambahkan data baru",onClick:u[2]||(u[2]=e=>p())})])),_:1}),(0,l.bF)(v,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(x,{flat:"",bordered:""},{default:(0,l.k6)((()=>[P,(0,l.Lk)("tbody",null,[a.value?((0,l.uX)(),(0,l.CE)("tr",R,[(0,l.Lk)("td",E,[(0,l.bF)(q,{color:"green",size:"md"})])])):t.value.length||a.value?i.value?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:3},(0,l.pI)(m(),((e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",H,(0,n.v_)(e.urut),1),(0,l.Lk)("td",D,(0,n.v_)(e.paket),1),(0,l.Lk)("td",W,(0,n.v_)(e.iuran),1),(0,l.Lk)("td",O,(0,n.v_)(e.nominal.toRupiah()),1),(0,l.Lk)("td",$,(0,n.v_)(e.qty),1),(0,l.Lk)("td",j,(0,n.v_)((Number(e.qty)*Number(e.nominal)).toRupiah()),1),(0,l.Lk)("td",z,[(0,l.bF)(g,{icon:"edit",flat:"",color:"green-10",onClick:a=>k(e)},null,8,["onClick"])])])))),128)):((0,l.uX)(),(0,l.CE)("tr",T,X)):((0,l.uX)(),(0,l.CE)("tr",I,U))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",J,[M,(0,l.Lk)("td",G,(0,n.v_)(b().toRupiah()),1),Y])])])),_:1})])),_:1})])),_:1}),(0,l.bF)(h,{modelValue:o.value,"onUpdate:modelValue":u[5]||(u[5]=e=>o.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(Q,{title:"Input Paket Iuran",data:d.value,onSuccessSubmit:u[3]||(u[3]=e=>r()),onSuccessDelete:u[4]||(u[4]=e=>r())},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var ee=t(75013),ae=t(76941),te=t(94362),le=t(88959);const ne=Z,ue=ne;S()(Z,"components",{QPage:ee.A,QCard:v.A,QCardSection:q.A,QSpace:A.A,QBtn:_.A,QSelect:ae.A,QMarkupTable:te.A,QSpinnerFacebook:le.A,QDialog:x.A})}}]);