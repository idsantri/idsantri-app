"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5494],{45494:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});t(67590);var o=t(51347),r=t(8633),n=t(34187),s=t(60455),l=t(93022),u=t(44257),i=t(81131),c=t(86159),d=t(69463),p=t(15469);const g={class:""},m={class:"q-gutter-y-md column"},b={__name:"LoginPage",props:{credential:{type:Object}},emits:["title","errors"],setup(e,{emit:a}){const t=(0,s.rd)(),b=(0,n.KR)(""),f=(0,n.KR)(""),h=(0,n.KR)(!1),v=a;v("title","Login"),v("errors",[]);const y=e,A=async()=>{v("errors",[]);try{h.value=!0;const e=await i.A.post("login",{login:b.value,password:f.value});(0,u.A)().token=e.data.token,(0,u.A)().user=e.data.user,(0,u.A)().roles=e.data.roles,(0,u.A)().permissions=e.data.permissions,(0,p.VX)(e.data.message);const a=e.data.user.confirmed_at;a?t.push("/"):t.push("/profile")}catch(e){v("errors",(0,d.$r)(e.response?.data?.message||"Terjadi sebuah kesalahan"))}finally{h.value=!1}};function w(){const e=(0,l.A)();e.notify({message:"Klik tombol info (kanan-atas) untuk info login.",icon:"info",color:"green-7",textColor:"green-11",timeout:7500,actions:[{color:"green-11",icon:"close",round:!0}]})}return(0,o.wB)([()=>y.credential.username,()=>y.credential.password],(([e,a])=>{c.A.DEV&&(e&&(b.value=e),a&&(f.value=a))})),(0,o.sV)((()=>{c.A.DEV&&w()})),(0,o.$u)((()=>{const e=document.getElementById("resend-email");e&&e.addEventListener("click",(async a=>{v("errors",[]),a.preventDefault();const t=e.href.replace("%2540","@");try{h.value=!0;const e=await i.A.get(t),a=(0,p.Wv)(e.data.message,0);await a}catch(o){v("errors",(0,d.$r)(o.response?.data?.message||"Terjadi sebuah kesalahan"))}finally{h.value=!1}}))})),(e,a)=>{const t=(0,o.g2)("q-input"),n=(0,o.g2)("q-btn"),s=(0,o.g2)("q-card-section"),l=(0,o.g2)("q-card"),u=(0,o.g2)("q-spinner-cube");return(0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("form",{onSubmit:(0,r.D$)(A,["prevent"])},[(0,o.Lk)("div",m,[(0,o.bF)(t,{"bg-color":"green-1",outlined:"",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),required:"",label:"Login",hint:"Username atau email/surel Anda!",autocomplete:"off",autocapitalize:"none",readonly:"",onfocus:"this.removeAttribute('readonly');",onblur:"this.setAttribute('readonly','true');"},null,8,["modelValue"]),(0,o.bF)(t,{id:"password","bg-color":"green-1",outlined:"",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),type:"password",required:"",label:"Password",autocomplete:"off",autocapitalize:"none",readonly:"",onfocus:"this.removeAttribute('readonly');",onblur:"this.setAttribute('readonly','true');",hint:"Password atau kata sandi"},null,8,["modelValue"]),(0,o.bF)(n,{type:"submit",class:"full-width q-pa-sm text-green-10",color:"green-3",label:"Login"}),(0,o.bF)(l,{class:"my-card",flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(s,{class:"text-green-10 text-center bg-green-2 q-pa-sm"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{outline:"",color:"green-10",class:"full-width text-weight-regular","no-caps":"",to:"/register",label:"Belum punya akun? Daftar!"}),(0,o.bF)(n,{outline:"",color:"green-10",class:"full-width text-weight-regular q-mt-sm","no-caps":"",to:"/forgot-password",label:"Lupa password? Atur ulang!"})])),_:1})])),_:1})])],32),(0,o.bo)((0,o.bF)(u,{color:"green-12",size:"14em",class:"absolute-center"},null,512),[[r.aG,h.value]])])}}};var f=t(46395),h=t(22677),v=t(83341),y=t(60222),A=t(71402),w=t(272),k=t.n(w);const q=b,V=q;k()(b,"components",{QInput:f.A,QBtn:h.A,QCard:v.A,QCardSection:y.A,QSpinnerCube:A.A})}}]);