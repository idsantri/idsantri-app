"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5672],{15672:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_e});var t=a(51347),s=a(37763),n=a(34187),i=a(21734),o=(a(67590),a(96305)),d=a(15469);const r=(0,o.nY)("mutasi-domisili",{state:()=>({santri:[],newFilter:{domisili:""}}),getters:{getSantri:e=>e.santri},actions:{resetSantri(){this.santri=[]},addSantri(e){this.resetSantri(),e.forEach((e=>{this.santri.push({id:e.id,santri_id:e.id,nama:e.nama,domisili:e.domisili,tingkat_id:e.tingkat_id,tingkat:e.tingkat,kelas:e.kelas,new_domisili:"",new_keterangan:"",proses:!1})}))},getProsesTrue(){return this.santri.filter((e=>1==e.proses))},getProsesFalse(){return this.santri.filter((e=>0==e.proses))},prosesTrue(e){if(!this.newFilter.domisili)return(0,d.UG)("Tentukan domisili baru");const l=this.santri.findIndex((l=>l.id===e)),a=this.santri[l];a.proses=!0,a.new_domisili=this.newFilter.domisili,a.new_keterangan="Mutasi Domisili"},prosesFalse(e){const l=this.santri.findIndex((l=>l.id===e)),a=this.santri[l];a.proses=!1,a.new_domisili=null,a.new_keterangan=null},deleteTrueProses(){const e=[];this.santri.forEach((l=>{l.proses||e.push(l)})),this.santri=e}},persist:!0});var u=a(90486),c=a(92938);const g=(0,t.Lk)("th",{class:"text-center"},"ID Santri",-1),k=(0,t.Lk)("th",{class:"text-left"},"Nama",-1),m=(0,t.Lk)("th",{class:"text-left"},"Domisili",-1),b=(0,t.Lk)("th",{class:"text-left"},"Kelas",-1),p=(0,t.Lk)("th",{class:"text-left"},"Tingkat",-1),_={class:"text-right"},v={class:"text-center"},f={class:"text-right"},h={__name:"LeftTable",props:{onLoading:{type:Boolean,default:!1}},setup(e){const l=e,a=(0,n.lW)((()=>l.onLoading)),i=(0,n.KR)(!1),o=r(),d=(0,t.EW)((()=>o.getProsesFalse()));function u(){const e=d.value.length;if(!e)return;let l=0;i.value=!0,d.value.forEach((a=>{setTimeout((()=>{o.prosesTrue(a.id),l++,l===e&&(i.value=!1)}),500)}))}return(e,l)=>{const r=(0,t.g2)("q-btn"),c=(0,t.g2)("q-spinner-bars"),h=(0,t.g2)("q-inner-loading"),F=(0,t.g2)("q-markup-table");return(0,t.uX)(),(0,t.Wv)(F,{flat:"",bordered:"",style:{height:"550px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[g,k,m,b,p,(0,t.Lk)("th",_,[(0,t.bF)(r,{icon:"keyboard_double_arrow_right",dense:"",color:"green-10",glossy:"",class:"text-green-11",disable:!d.value.length,onClick:u},null,8,["disable"])])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value,((e,l)=>((0,t.uX)(),(0,t.CE)("tr",{key:l},[(0,t.Lk)("td",v,(0,s.v_)(e.id),1),(0,t.Lk)("td",null,(0,s.v_)(e.nama),1),(0,t.Lk)("td",null,(0,s.v_)(e.domisili),1),(0,t.Lk)("td",null,(0,s.v_)(e.kelas),1),(0,t.Lk)("td",null,(0,s.v_)(e.tingkat),1),(0,t.Lk)("td",f,[(0,t.bF)(r,{icon:"arrow_right",dense:"",outline:"",color:"green-10",glossy:"",onClick:l=>(0,n.R1)(o).prosesTrue(e.id)},null,8,["onClick"])])])))),128))]),(0,t.bF)(h,{showing:a.value||i.value},{default:(0,t.k6)((()=>[(0,t.bF)(c,{size:"4em",color:"green"})])),_:1},8,["showing"])])),_:1})}}};var F=a(94362),q=a(22677),L=a(58356),A=a(40585),w=a(272),x=a.n(w);const Q=h,y=Q;x()(h,"components",{QMarkupTable:F.A,QBtn:q.A,QInnerLoading:L.A,QSpinnerBars:A.A});const T={class:"row"},C={class:"text-caption text-italic"},V=(0,t.Lk)("br",null,null,-1),S=(0,t.Lk)("div",null,null,-1),R={__name:"LeftCard",setup(e){const l=(0,n.KR)({tingkat_id:"",kelas:"",domisili:""}),a=r(),o=(0,n.KR)(!1),d=(0,t.EW)((()=>a.getProsesFalse()));function g(){const e=document.querySelectorAll("div.q-field__bottom.row.items-start.q-field__bottom");e.forEach((e=>e.remove()))}async function k(e){const l=await(0,i.A)({endPoint:"mutasi/not",params:e,loading:o});a.addSantri(l.santri)}return(0,t.sV)((()=>{g()})),(0,t.wB)((()=>l.value.tingkat_id),(e=>{e&&(l.value.kelas="",l.value.domisili="")})),(0,t.wB)((()=>l.value.kelas),(async e=>{e&&(l.value.domisili="")})),(0,t.wB)((()=>l.value.domisili),(async e=>{e&&(l.value.tingkat_id="",l.value.kelas="")})),(0,t.wB)(l,(async e=>{a.resetSantri(),e.tingkat_id&&e.kelas?await k({tingkat_id:e.tingkat_id,kelas:e.kelas}):e.domisili&&await k({domisili:e.domisili})}),{deep:!0}),(e,a)=>{const n=(0,t.g2)("q-toolbar-title"),i=(0,t.g2)("q-btn"),r=(0,t.g2)("q-toolbar"),g=(0,t.g2)("q-card-section"),k=(0,t.g2)("q-separator"),m=(0,t.g2)("q-space"),b=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(p,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(g,{class:"q-pa-sm bg-green-7"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"text-subtitle1"},{default:(0,t.k6)((()=>[(0,t.eW)(" Data Santri ")])),_:1}),(0,t.bF)(i,{icon:"sync",dense:"",flat:"",class:"q-mr-xs",onClick:e=>null,disable:""})])),_:1})])),_:1}),(0,t.bF)(g,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",T,[(0,t.bF)(c.A,{modelValue:l.value.tingkat_id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.tingkat_id=e),label:"Tingkat Pendidikan",class:"col no-padding q-mr-md",hint:null},null,8,["modelValue"]),(0,t.bF)(u.A,{modelValue:l.value.kelas,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.kelas=e),url:"kelas",label:"Kelas",class:"col no-padding",disable:!l.value.tingkat_id},null,8,["modelValue","disable"])]),(0,t.bF)(u.A,{modelValue:l.value.domisili,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.domisili=e),url:"domisili",label:"Domisili",class:"q-mt-sm no-padding"},null,8,["modelValue"])])),_:1}),(0,t.bF)(k),(0,t.bF)(g,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{"on-loading":o.value},null,8,["on-loading"])])),_:1}),(0,t.bF)(k),(0,t.bF)(b,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",C,[(0,t.eW)(" Total: "+(0,s.v_)(d.value?.length||0)+" santri",1),V,(0,t.eW)(" Hanya menampilkan santri yang statusnya “Aktif” dan belum masuk ke tabel mutasi ")]),(0,t.bF)(m),S])),_:1})])),_:1})}}};var W=a(83341),B=a(60222),E=a(66739),P=a(4629),K=a(86915),D=a(25034),I=a(5873),X=a(27861);const U=R,M=U;x()(R,"components",{QCard:W.A,QCardSection:B.A,QToolbar:E.A,QToolbarTitle:P.A,QBtn:q.A,QSeparator:K.A,QCardActions:D.A,QSpace:I.A,QField:X.A});var z=a(24497);const H={class:"text-left"},N=(0,t.Lk)("th",{class:"text-left"},"Nama",-1),G=(0,t.Lk)("th",{class:"text-left"},"Domisili Asal",-1),Y=(0,t.Lk)("th",{class:"text-left"},"Domisili Baru *",-1),j=(0,t.Lk)("th",{class:"text-left"},"Keterangan",-1),J={class:"text-right"},O={class:"text-left"},Z={class:"text-right"},$={__name:"RightTable",props:{onLoading:{type:Boolean,default:!1}},setup(e){const l=e,a=r(),i=(0,t.EW)((()=>a.getProsesTrue())),o=(0,n.KR)(!1),d=(0,n.lW)((()=>l.onLoading)),u=(0,n.KR)({}),c=(0,n.KR)(!1);function g(){const e=i.value.length;if(!e)return;let l=0;o.value=!0,i.value.forEach((t=>{setTimeout((()=>{a.prosesFalse(t.id),l++,l===e&&(o.value=!1)}),500)}))}function k(e){u.value=e,c.value=!0}return(e,l)=>{const r=(0,t.g2)("q-btn"),m=(0,t.g2)("q-spinner-bars"),b=(0,t.g2)("q-inner-loading"),p=(0,t.g2)("q-markup-table"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(p,{flat:"",bordered:"",style:{height:"550px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",H,[(0,t.bF)(r,{icon:"keyboard_double_arrow_left",dense:"",color:"green-10",glossy:"",class:"text-green-11",disable:!i.value.length,onClick:g},null,8,["disable"])]),N,G,Y,j,(0,t.Lk)("th",J,[(0,t.bF)(r,{icon:"edit",dense:"",flat:"",disable:"",color:"green-10"})])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.value,((e,l)=>((0,t.uX)(),(0,t.CE)("tr",{key:l},[(0,t.Lk)("td",O,[(0,t.bF)(r,{icon:"arrow_left",dense:"",outline:"",color:"green-10",glossy:"",onClick:l=>(0,n.R1)(a).prosesFalse(e.id)},null,8,["onClick"])]),(0,t.Lk)("td",null,(0,s.v_)(e.nama),1),(0,t.Lk)("td",null,(0,s.v_)(e.domisili),1),(0,t.Lk)("td",null,(0,s.v_)(e.new_domisili),1),(0,t.Lk)("td",null,(0,s.v_)(e.new_keterangan??"-"),1),(0,t.Lk)("td",Z,[(0,t.bF)(r,{icon:"edit",dense:"",flat:"",color:"green-10",onClick:l=>k(e)},null,8,["onClick"])])])))),128))]),(0,t.bF)(b,{showing:d.value||o.value},{default:(0,t.k6)((()=>[(0,t.bF)(m,{size:"4em",color:"green"})])),_:1},8,["showing"])])),_:1}),(0,t.bF)(_,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(z.A,{data:u.value},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var ee=a(30045);const le=$,ae=le;x()($,"components",{QMarkupTable:F.A,QBtn:q.A,QInnerLoading:L.A,QSpinnerBars:A.A,QDialog:ee.A});var te=a(68158);const se={class:"row"},ne={class:"text-caption text-italic"},ie=(0,t.Lk)("br",null,null,-1),oe={__name:"RightCard",setup(e){const l=r(),{newFilter:a}=(0,o.bP)(l),i=(0,t.EW)((()=>l.getProsesTrue())),d=(0,n.KR)(!1);function c(){const e=document.querySelectorAll("div.q-field__bottom.row.items-start.q-field__bottom");e.forEach((e=>e.remove()))}async function g(){const e=i.value.map((e=>({santri_id:e.santri_id,new_domisili:e.new_domisili,new_keterangan:e.new_keterangan}))),a={santri:e},t=await(0,te.A)({endPoint:"mutasi",loading:d,data:a});t&&l.deleteTrueProses()}return(0,t.sV)((()=>{c()})),(e,l)=>{const o=(0,t.g2)("q-toolbar-title"),r=(0,t.g2)("q-btn"),c=(0,t.g2)("q-toolbar"),k=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-select"),b=(0,t.g2)("q-separator"),p=(0,t.g2)("q-space"),_=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(v,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"q-pa-sm bg-green-7"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"text-subtitle1"},{default:(0,t.k6)((()=>[(0,t.eW)(" Data Mutasi ")])),_:1}),(0,t.bF)(r,{icon:"sync",dense:"",flat:"",class:"q-mr-xs",onClick:e=>null,disable:""})])),_:1})])),_:1}),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",se,[(0,t.bF)(m,{modelValue:(0,n.R1)(a).tingkat_id,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.R1)(a).tingkat_id=e),label:"",class:"col no-padding q-mr-md",filled:"",outlined:"",dense:"",disable:""},null,8,["modelValue"]),(0,t.bF)(m,{modelValue:(0,n.R1)(a).kelas,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.R1)(a).kelas=e),label:"",class:"col no-padding",filled:"",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),(0,t.bF)(u.A,{modelValue:(0,n.R1)(a).domisili,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.R1)(a).domisili=e),url:"domisili",label:"Domisili Baru",class:"q-mt-sm no-padding"},null,8,["modelValue"])])),_:1}),(0,t.bF)(b),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(ae,{"on-loading":d.value},null,8,["on-loading"])])),_:1}),(0,t.bF)(b),(0,t.bF)(_,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ne,[(0,t.eW)(" Total: "+(0,s.v_)(i.value?.length||0)+" santri",1),ie,(0,t.eW)(" Teliti kembali data domisili baru! ")]),(0,t.bF)(p),(0,t.Lk)("div",null,[(0,t.bF)(r,{label:"Simpan","no-caps":"",icon:"save",color:"green-10",class:"text-green-11",onClick:g,disable:!i.value.length>0},null,8,["disable"])])])),_:1})])),_:1})}}};var de=a(76941);const re=oe,ue=re;x()(oe,"components",{QCard:W.A,QCardSection:B.A,QToolbar:E.A,QToolbarTitle:P.A,QBtn:q.A,QSelect:de.A,QSeparator:K.A,QCardActions:D.A,QSpace:I.A,QField:X.A});const ce={class:"row"},ge={class:"col q-pa-sm"},ke={class:"col q-pa-sm"},me={__name:"ProsesiIndex",setup(e){return(0,t.sV)((()=>{const e=document.getElementById("toggle-drawer");e&&e.click()})),(e,l)=>{const a=(0,t.g2)("q-toolbar-title"),s=(0,t.g2)("q-btn"),n=(0,t.g2)("q-toolbar"),i=(0,t.g2)("q-card-section"),o=(0,t.g2)("q-card"),d=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(d,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"",style:{"min-width":"1200px"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(a,{class:"text-subtitle1"},{default:(0,t.k6)((()=>[(0,t.eW)(" Modul Mutasi Domisili ")])),_:1}),(0,t.bF)(s,{icon:"visibility",label:"Hasil Mutasi",dense:"",outline:"","no-caps":"",class:"q-mr-xs q-px-sm",to:"/makhadiyah/mutasi/result"}),(0,t.bF)(s,{disable:"",flat:"",dense:"",icon:"more_vert",class:"q-ml-md",color:"green-11"})])),_:1})])),_:1}),(0,t.bF)(i,{class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ce,[(0,t.Lk)("div",ge,[(0,t.bF)(M)]),(0,t.Lk)("div",ke,[(0,t.bF)(ue)])])])),_:1})])),_:1})])),_:1})}}};var be=a(75013);const pe=me,_e=pe;x()(me,"components",{QPage:be.A,QCard:W.A,QCardSection:B.A,QToolbar:E.A,QToolbarTitle:P.A,QBtn:q.A})}}]);