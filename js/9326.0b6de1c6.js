"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9326],{79326:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var l=t(51347),n=t(34187),s=t(95455),u=t(23336),i=t(30528),d=t(69463),o=t(8633),c=t(37763),r=t(68158),m=t(6397),b=t(47543),g=t(52364),p=t(90486);const v={key:0},k={__name:"SantriStatusCrud",props:{data:{type:Object,required:!0},isNew:{type:Boolean,default:!0},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const t=e,s=a,u=(0,n.KR)({}),i=(0,n.KR)(!1);(0,l.sV)((async()=>{Object.assign(u.value,t.data)}));const d=async()=>{const e={santri_id:u.value.santri_id,status:u.value.status,keterangan:u.value.keterangan};let a=null;a=t.isNew?await(0,r.A)({endPoint:"status",data:e,loading:i}):await(0,m.A)({endPoint:`status/${u.value.id}`,data:e,confirm:!0,notify:!0,loading:i}),a&&(document.getElementById("btn-close").click(),s("successSubmit"))},k=async e=>{const a={endPoint:`status/${e}`,loading:i},t=await(0,b.A)(a);t&&(document.getElementById("btn-close").click(),s("successDelete"))};return(a,n)=>{const s=(0,l.g2)("q-card-section"),r=(0,l.g2)("q-spinner-cube"),m=(0,l.g2)("q-dialog"),b=(0,l.g2)("q-input"),_=(0,l.g2)("q-btn"),A=(0,l.g2)("q-space"),f=(0,l.g2)("q-card-actions"),F=(0,l.g2)("q-form"),S=(0,l.g2)("q-card"),q=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(S,{class:"full-width",style:{"max-width":"425px"}},{default:(0,l.k6)((()=>[(0,l.bF)(F,{onSubmit:(0,o.D$)(d,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(s,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(g.A,{onEmitButton:e=>null},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(t.title)+" â€” ",1),(0,l.Lk)("em",null,(0,c.v_)(e.isNew?"baru":"edit"),1)])),_:1})])),_:1}),(0,l.bF)(s,null,{default:(0,l.k6)((()=>[i.value?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.bF)(m,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.bF)(b,{dense:"",outlined:"",label:"Nama","model-value":u.value?.nama+" ("+u.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),(0,l.bF)(p.A,{modelValue:u.value.status,"onUpdate:modelValue":n[1]||(n[1]=e=>u.value.status=e),url:"status",label:"Status",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(p.A,{modelValue:u.value.keterangan,"onUpdate:modelValue":n[2]||(n[2]=e=>u.value.keterangan=e),url:"keterangan-status",label:"Keterangan",class:"q-mt-sm"},null,8,["modelValue"])])),_:1}),(0,l.bF)(f,{class:"flex bg-green-6"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(_,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:n[3]||(n[3]=e=>k(u.value.id))},null,512),[[o.aG,!t.isNew]]),(0,l.bF)(A),(0,l.bo)((0,l.bF)(_,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[q]]),(0,l.bF)(_,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var _=t(83341),A=t(53417),f=t(60222),F=t(30045),S=t(71402),q=t(46395),w=t(25034),y=t(22677),V=t(5873),C=t(61038),K=t(272),Q=t.n(K);const R=k,h=R;Q()(k,"components",{QCard:_.A,QForm:A.A,QCardSection:f.A,QDialog:F.A,QSpinnerCube:S.A,QInput:q.A,QCardActions:w.A,QBtn:y.A,QSpace:V.A}),Q()(k,"directives",{ClosePopup:C.A});var x=t(60455),D=t(21734);const E={__name:"SantriStatus",setup(e){const a=(0,n.KR)(!1),t=(0,n.KR)(!1),o=(0,n.KR)({}),c=(0,n.KR)([]),r=(0,n.KR)([]),m=(0,n.KR)(!1),b=(0,n.KR)({}),g=(0,x.lq)(),p=g.params.id;async function v(){const e=await(0,D.A)({endPoint:`santri/${p}/status`,loading:a});r.value=e.status,c.value=e.status.map((e=>({Tanggal:(0,u.kz)(e.date_m)+" | "+(0,i.jh)(e.date_m),Status:e.status,Keterangan:e.keterangan||"-",id:e.id}))),b.value=e.santri}(0,l.sV)((async()=>{await v()}));const k=()=>{o.value={santri_id:b.value.id,nama:b.value.nama},m.value=!0,t.value=!0},_=({id:e})=>{o.value=(0,d.I$)(r,e),o.value.santri_id=b.value.id,o.value.nama=b.value.nama,m.value=!1,t.value=!0};return(e,n)=>{const u=(0,l.g2)("q-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(s.A,{data:c.value,spinner:a.value,onAdd:k,onEdit:_},null,8,["data","spinner"]),(0,l.bF)(u,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=e=>t.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(h,{data:o.value,"is-new":m.value,title:"Input Status",onSuccessSubmit:v,onSuccessDelete:v},null,8,["data","is-new"])])),_:1},8,["modelValue"])])}}},I=E,N=I;Q()(E,"components",{QDialog:F.A})}}]);