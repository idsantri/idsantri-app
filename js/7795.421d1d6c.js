"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[7795],{7795:(a,e,t)=>{t.r(e),t.d(e,{default:()=>ea});var l=t(1347),r=t(7763),n=t(8633),s=t(4187),i=t(842),d=t(455),o=t(1734);const u=a=>((0,l.Qi)("data-v-2f9872b9"),a=a(),(0,l.jt)(),a),k=["innerHTML"],p=u((()=>(0,l.Lk)("div",{class:"text-center q-pa-lg text-negative text-italic"}," Tentukan Tahun Ajaran, Tingkat Pendidikan, dan Kelas! ",-1))),_={key:0},c={key:1},b={key:0},g={key:1},m={key:2},v={key:0},h={key:1},x={key:0,class:"text-italic text-negative"},f={key:1},F=u((()=>(0,l.Lk)("thead",{class:"bg-green-2 text-weight-bold text-right"},[(0,l.Lk)("tr",null,[(0,l.Lk)("td",{class:"text-left",style:{width:"80px"}}," ID (Kode) "),(0,l.Lk)("td",{class:"text-left"}," Mata Pelajaran "),(0,l.Lk)("td",{style:{width:"50px"}}," U-1 "),(0,l.Lk)("td",{style:{width:"50px"}}," U-2 "),(0,l.Lk)("td",{style:{width:"50px"}}," U-3 "),(0,l.Lk)("td",{style:{width:"50px"}}," U-4 "),(0,l.Lk)("td",{style:{width:"65px"}}," Rerata ")])],-1))),y={class:"text-left"},w={class:"text-left"},q={class:"text-right"},L={class:"text-right"},A={class:"text-right"},C={class:"text-right"},X={class:"text-right"},Q={class:"bg-green-2 text-weight-bold text-right"},I=u((()=>(0,l.Lk)("td",{colspan:"2",class:"text-left"}," Rerata ",-1))),E={__name:"NilaiIndex",setup(a){const e=(0,s.KR)({}),t=(0,d.lq)(),u={thAjaranH:t.params.thAjaranH,tingkatId:t.params.tingkatId,kelas:t.params.kelas},E=(0,s.KR)([{}]),W=(0,s.KR)(!1),R=(0,s.KR)([{}]),T=(0,s.KR)([]);function K(a){e.value=a}const j=[{name:"no_absen",label:"No",align:"center",field:a=>a.no_absen,format:a=>`${a||""}`,sortable:!0},{name:"kelas_id",label:"ID Kelas",align:"center",field:a=>a.kelas_id,format:a=>`${a}`,sortable:!0},{name:"santri_id",label:"ID Santri",align:"center",field:a=>a.santri_id,format:a=>`${a}`,sortable:!0},{name:"nama",label:"Nama",align:"left",field:a=>a.nama,sortable:!0},{name:"rerata_1",label:"Rerata-1",align:"right",field:a=>a.rerata_1?parseFloat(a.rerata_1).toFixed(1):null,sortable:!0},{name:"rerata_2",label:"Rerata-2",align:"right",field:a=>a.rerata_2?parseFloat(a.rerata_2).toFixed(1):null,sortable:!0},{name:"rerata_3",label:"Rerata-3",align:"right",field:a=>a.rerata_3?parseFloat(a.rerata_3).toFixed(1):null,sortable:!0},{name:"rerata_4",label:"Rerata-4",align:"right",field:a=>a.rerata_4?parseFloat(a.rerata_4).toFixed(1):null,sortable:!0},{name:"rerata_akhir",label:"R. Akhir",align:"right",field:a=>a.rerata_akhir?parseFloat(a.rerata_akhir).toFixed(1):null,sortable:!0}];async function H(a){if(a.expand=!a.expand,a.expand){T.value[a.key]=!0,R.value[a.key]=null;const e=await(0,o.A)({endPoint:"nilai-mapel",params:{kelas_id:a.key,category:"rapor"}});T.value[a.key]=!1,R.value[a.key]=e.nilai}}function N(a,e){let t=0,l=0;if(a?.length){a.forEach((a=>{null!==a[e]&&(t+=parseFloat(a[e]),l++)}));const r=t/l;return isNaN(r)?null:r.toFixed(1)}return null}return(0,l.sV)((async()=>{if(u.thAjaranH&&u.tingkatId&&u.kelas){const a=await(0,o.A)({endPoint:"nilai-mapel/rerata",params:{th_ajaran_h:u.thAjaranH,tingkat_id:u.tingkatId,kelas:u.kelas,category:"rapor"},loading:W});E.value=a.nilai}})),(a,t)=>{const s=(0,l.g2)("q-space"),d=(0,l.g2)("q-btn"),o=(0,l.g2)("q-item-label"),P=(0,l.g2)("q-item-section"),D=(0,l.g2)("q-icon"),M=(0,l.g2)("q-item"),S=(0,l.g2)("q-list"),U=(0,l.g2)("q-btn-dropdown"),$=(0,l.g2)("q-card-section"),B=(0,l.g2)("q-skeleton"),z=(0,l.g2)("q-th"),G=(0,l.g2)("q-tr"),V=(0,l.g2)("q-td"),J=(0,l.g2)("q-markup-table"),O=(0,l.g2)("q-table"),Y=(0,l.g2)("q-card"),Z=(0,l.g2)("q-page"),aa=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(Z,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(i.A,{showBulanUjian:!1,"start-url":"/madrasah/nilai-mapel/rerata",onDataFilter:K}),(0,l.bF)(Y,{class:"q-mt-sm"},{default:(0,l.k6)((()=>[(0,l.bF)($,{class:"bg-green-8 text-green-1 text-subtitle1 q-pa-sm flex flex-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",{innerHTML:e.value.display+" ➡️ Nilai <strong>Rapor</strong>"||0},null,8,k),(0,l.bF)(s),(0,l.bF)(d,{dense:"",icon:"download",label:"Excel","no-caps":"",class:"bg-green-11 text-green-10 q-px-md q-mr-sm",to:"/madrasah/nilai-mapel/download"}),(0,l.bF)(d,{dense:"",icon:"upload",label:"Excel","no-caps":"",class:"bg-green-11 text-green-10 q-px-md q-mr-sm",to:"/madrasah/nilai-mapel/upload"}),(0,l.bF)(U,{outline:"","no-caps":"",class:"text-green-11 q-px-md",size:"",dense:"","dropdown-icon":"more_vert"},{default:(0,l.k6)((()=>[(0,l.bF)(S,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(M,{to:"/madrasah/mapel"},{default:(0,l.k6)((()=>[(0,l.bF)(P,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Mata Pelajaran ")])),_:1})])),_:1}),(0,l.bF)(P,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(D,{name:"settings"})])),_:1})])),_:1})),[[aa]])])),_:1})])),_:1})])),_:1}),u.thAjaranH&&u.tingkatId&&u.kelas?((0,l.uX)(),(0,l.Wv)($,{key:1,class:"q-pa-sm"},{default:(0,l.k6)((()=>[W.value?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.bF)(B,{type:"text",height:"4rem"})])):((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(O,{flat:"",rows:E.value,columns:j,"row-key":"kelas_id","rows-per-page-options":[10,25,50,100,0],class:"my-sticky-header-table"},{header:(0,l.k6)((a=>[(0,l.bF)(G,{props:a,class:""},{default:(0,l.k6)((()=>[(0,l.bF)(z),(0,l.bF)(z),(0,l.bF)(z),(0,l.bF)(z),(0,l.bF)(z,{class:"text-left"},{default:(0,l.k6)((()=>[(0,l.eW)("Retata Kelas")])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(N(E.value,"rerata_1")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(N(E.value,"rerata_2")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(N(E.value,"rerata_3")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(N(E.value,"rerata_4")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(N(E.value,"rerata_akhir")),1)])),_:1})])),_:2},1032,["props"]),(0,l.bF)(G,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(z,{"auto-width":""},{default:(0,l.k6)((()=>[(0,l.eW)("!")])),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.cols,(e=>((0,l.uX)(),(0,l.Wv)(z,{key:e.name,props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,l.k6)((a=>[(0,l.bF)(G,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(V,{"auto-width":""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{size:"sm",color:"green",round:"",dense:"",onClick:e=>H(a),icon:a.expand?"remove":"add"},null,8,["onClick","icon"])])),_:2},1024),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.cols,(e=>((0,l.uX)(),(0,l.Wv)(V,{key:e.name,props:a},{default:(0,l.k6)((()=>["kelas_id"==e.name?((0,l.uX)(),(0,l.CE)("span",b,[(0,l.bF)(d,{label:e.value,dense:"",outline:"",class:"q-px-md text-green-10",to:`/madrasah/kelas/${e.value}/nilai-mapel`},null,8,["label","to"])])):"santri_id"==e.name?((0,l.uX)(),(0,l.CE)("span",g,[(0,l.bF)(d,{label:e.value,dense:"",outline:"",class:"q-px-md text-green-10",to:`/santri/${e.value}`},null,8,["label","to"])])):((0,l.uX)(),(0,l.CE)("span",m,(0,r.v_)(e.value),1))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"]),(0,l.bo)((0,l.bF)(G,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(V,{colspan:"100%"},{default:(0,l.k6)((()=>[T.value[a.row.kelas_id]?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.bF)(B,{height:"100px"})])):((0,l.uX)(),(0,l.CE)("div",h,[0==R.value[a.row.kelas_id]?.length?((0,l.uX)(),(0,l.CE)("div",x," Tidak ada data untuk ditampilkan! ")):((0,l.uX)(),(0,l.CE)("div",f,[(0,l.bF)(J,{flat:"",dense:"",class:"bg-green-1",separator:"cell"},{default:(0,l.k6)((()=>[F,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(R.value[a.row.kelas_id],((a,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e},[(0,l.Lk)("td",y,(0,r.v_)(a.id),1),(0,l.Lk)("td",w,(0,r.v_)(a.mapel),1),(0,l.Lk)("td",q,(0,r.v_)(a.nilai_1),1),(0,l.Lk)("td",L,(0,r.v_)(a.nilai_2),1),(0,l.Lk)("td",A,(0,r.v_)(a.nilai_3),1),(0,l.Lk)("td",C,(0,r.v_)(a.nilai_4),1),(0,l.Lk)("td",X,(0,r.v_)(a.rerata?parseFloat(a.rerata).toFixed(1):null),1)])))),128))]),(0,l.Lk)("tfoot",Q,[(0,l.Lk)("tr",null,[I,(0,l.Lk)("td",null,(0,r.v_)(N(R.value[a.row.kelas_id],"nilai_1")),1),(0,l.Lk)("td",null,(0,r.v_)(N(R.value[a.row.kelas_id],"nilai_2")),1),(0,l.Lk)("td",null,(0,r.v_)(N(R.value[a.row.kelas_id],"nilai_3")),1),(0,l.Lk)("td",null,(0,r.v_)(N(R.value[a.row.kelas_id],"nilai_4")),1),(0,l.Lk)("td",null,(0,r.v_)(N(R.value[a.row.kelas_id],"rerata")),1)])])])),_:2},1024)]))]))])),_:2},1024)])),_:2},1032,["props"]),[[n.aG,a.expand]])])),_:1},8,["rows"])]))])),_:1})):((0,l.uX)(),(0,l.Wv)($,{key:0,class:"q-pa-sm"},{default:(0,l.k6)((()=>[p])),_:1}))])),_:1})])),_:1})}}};var W=t(2968),R=t(5013),T=t(3341),K=t(222),j=t(5873),H=t(2677),N=t(3614),P=t(3766),D=t(2589),M=t(4958),S=t(9039),U=t(3933),$=t(981),B=t(7010),z=t(7339),G=t(2517),V=t(8785),J=t(4362),O=t(1038),Y=t(272),Z=t.n(Y);const aa=(0,W.A)(E,[["__scopeId","data-v-2f9872b9"]]),ea=aa;Z()(E,"components",{QPage:R.A,QCard:T.A,QCardSection:K.A,QSpace:j.A,QBtn:H.A,QBtnDropdown:N.A,QList:P.A,QItem:D.A,QItemSection:M.A,QItemLabel:S.A,QIcon:U.A,QSkeleton:$.Ay,QTable:B.A,QTr:z.A,QTh:G.A,QTd:V.A,QMarkupTable:J.A}),Z()(E,"directives",{ClosePopup:O.A})}}]);