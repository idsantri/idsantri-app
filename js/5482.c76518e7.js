"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5482],{5482:(a,e,l)=>{l.r(e),l.d(e,{default:()=>fa});var n=l(1347),t=l(4187),s=l(455),i=l(3336),o=l(444),u=l(7763);const d={class:"flex items-center"},r={class:"text-subtitle2"},m={key:0},c={key:1,class:"row"},b={class:"col-4 q-pr-sm"},g={key:0},p={class:"col"},v={class:"text-caption text-italic"},k={class:"q-mb-sm"},_={__name:"CardImage",props:{title:String,data:Object,image:String,loading:Boolean,loadingImage:Boolean},setup(a){return(e,l)=>{const t=(0,n.g2)("q-space"),s=(0,n.g2)("q-card-section"),i=(0,n.g2)("q-spinner-cube"),o=(0,n.g2)("q-img"),_=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(_,null,{default:(0,n.k6)((()=>[(0,n.bF)(s,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",d,[(0,n.Lk)("div",r,(0,u.v_)(a.title),1),(0,n.bF)(t)])])),_:1}),(0,n.bF)(s,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[a.loading?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.bF)(i,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",b,[a.loadingImage?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.bF)(i,{color:"green-12",size:"4em",class:"flex q-ma-sm q-mx-auto"})])):((0,n.uX)(),(0,n.Wv)(o,{key:1,src:a.image,ratio:3/4,alt:"santri"},null,8,["src"])),(0,n.RG)(e.$slots,"button")]),(0,n.Lk)("div",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.data,((a,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("div",v,(0,u.v_)(e),1),(0,n.Lk)("div",k,(0,u.v_)(a),1)])))),128))])]))])),_:3})])),_:3})}}};var f=l(3341),F=l(222),q=l(5873),w=l(1402),h=l(7472),A=l(272),V=l.n(A);const C=_,S=C;V()(_,"components",{QCard:f.A,QCardSection:F.A,QSpace:q.A,QSpinnerCube:w.A,QImg:h.A});var Q=l(423),I=l(3556),x=l(528);const R={__name:"SantriRelations",props:{santriId:{default:null}},setup(a){const e=a,l=(0,t.KR)(0);return(a,t)=>{const s=(0,n.g2)("q-route-tab"),i=(0,n.g2)("q-tabs"),o=(0,n.g2)("router-view"),u=(0,n.g2)("q-spinner-cube"),d=(0,n.g2)("q-card-section"),r=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(r,{key:l.value},{default:(0,n.k6)((()=>[(0,n.Lk)("button",{onClick:t[0]||(t[0]=a=>l.value++),id:"btn-rerender-santri-relations",style:{display:"none"}}," rerender "),(0,n.bF)(i,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-11 shadow-2",dense:"","indicator-color":"green-13",align:"left"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{name:"wali",label:"Wali",to:"/santri/"+e.santriId+"/wali"},null,8,["to"]),(0,n.bF)(s,{name:"ortu",label:"Ortu",to:"/santri/"+e.santriId+"/ortu"},null,8,["to"]),(0,n.bF)(s,{name:"status",label:"Status",to:"/santri/"+e.santriId+"/status"},null,8,["to"]),(0,n.bF)(s,{name:"kelas",label:"Kelas",to:"/santri/"+e.santriId+"/kelas"},null,8,["to"]),(0,n.bF)(s,{name:"domisili",label:"Domisili",to:"/santri/"+e.santriId+"/domisili"},null,8,["to"]),(0,n.bF)(s,{name:"iuran-total",label:"Iuran",to:"/santri/"+e.santriId+"/iuran-total"},null,8,["to"])])),_:1}),(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(n.tY,null,{default:(0,n.k6)((()=>[(0,n.bF)(o)])),fallback:(0,n.k6)((()=>[(0,n.bF)(u,{color:"green-12",size:"8em",class:"flex q-mx-auto"})])),_:1}))])),_:1})])),_:1})}}};var $=l(8805),W=l(6641);const y=R,K=y;V()(R,"components",{QCard:f.A,QTabs:$.A,QRouteTab:W.A,QCardSection:F.A,QSpinnerCube:w.A});var U=l(9195),D=l(1734),L=(l(7428),l(4114),l(9557),l(9908)),B=l(5605),P=l(8633),X=l(2364),N=l(2010),E=l(5469);const T={key:0},j=(0,n.Lk)("div",{class:"text-subtitle2"}," Identitas Pemohon (Wali) ",-1),z={__name:"PermohonanBerhenti",emits:["submitted"],setup(a,{emit:e}){const l=(0,t.KR)({jenis_permohonan:"Berhenti",tunggakan:"Lunas"}),{santri:s}=(0,t.Kh)((0,I.A)()),i=(0,t.KR)([]),o=(0,t.KR)([]),u=(0,t.KR)(!1),d=e;async function r(){const a=JSON.parse(JSON.stringify(l.value));if(!a.tunggakan||!a.jenis_permohonan||!a.alasan||!a.wali_nama||!a.wali_status||!a.wali_hubungan)return(0,E.UG)("Isian tidak lengkap");a.id=s.id,d("submitted",a),document.getElementById("btn-close").click()}return(0,n.sV)((async()=>{await(0,N.Mr)({loading:o,lists:i,sort:!0,key:"keterangan-status"}),await(0,N.Mr)({loading:o,lists:i,sort:!0,key:"hubungan-wali"})})),(a,e)=>{const d=(0,n.g2)("q-card-section"),m=(0,n.g2)("q-spinner-cube"),c=(0,n.g2)("q-dialog"),b=(0,n.g2)("q-input"),g=(0,n.g2)("q-select"),p=(0,n.g2)("q-card"),v=(0,n.g2)("q-space"),k=(0,n.g2)("q-btn"),_=(0,n.g2)("q-card-actions"),f=(0,n.g2)("q-form"),F=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.Wv)(p,{class:"full-width",style:{"max-width":"425px"}},{default:(0,n.k6)((()=>[(0,n.bF)(f,{onSubmit:(0,P.D$)(r,["prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(X.A,{onEmitButton:a=>null},{default:(0,n.k6)((()=>[(0,n.eW)(" Permohonan Berhenti ")])),_:1})])),_:1}),(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[u.value?((0,n.uX)(),(0,n.CE)("div",T,[(0,n.bF)(c,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(m,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,n.Q3)("",!0),(0,n.bF)(b,{dense:"",class:"",outlined:"",label:"Santri ID",modelValue:(0,t.R1)(s).id,"onUpdate:modelValue":e[1]||(e[1]=a=>(0,t.R1)(s).id=a),filled:"",disable:""},null,8,["modelValue"]),(0,n.bF)(b,{dense:"",class:"q-mt-sm",outlined:"",label:"Nama",modelValue:(0,t.R1)(s).nama,"onUpdate:modelValue":e[2]||(e[2]=a=>(0,t.R1)(s).nama=a),filled:"",disable:""},null,8,["modelValue"]),(0,n.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Tunggakan*",modelValue:l.value.tunggakan,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.tunggakan=a),options:["Lunas","Belum Lunas"],clearable:"","use-input":"","new-value-mode":"add",behavior:"menu"},null,8,["modelValue"]),(0,n.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Jenis Permohonan*",modelValue:l.value.jenis_permohonan,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.jenis_permohonan=a),options:["Berhenti","Cuti/Istirahat"],clearable:"","use-input":"","new-value-mode":"add",behavior:"menu"},null,8,["modelValue"]),(0,n.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Alasan*","emit-value":"","map-options":"",modelValue:l.value.alasan,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.alasan=a),options:i.value["keterangan-status"],loading:o.value["keterangan-status"],"use-input":"","new-value-mode":"add",clearable:"",behavior:"menu"},null,8,["modelValue","options","loading"]),(0,n.bF)(p,{class:"q-mt-sm",flat:"",bordered:""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[j,(0,n.bF)(b,{dense:"",class:"",outlined:"",label:"Nama*",modelValue:l.value.wali_nama,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.wali_nama=a)},null,8,["modelValue"]),(0,n.bF)(b,{dense:"",class:"q-mt-sm",outlined:"",label:"Nomor Telepon",modelValue:l.value.wali_no_telepon,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.wali_no_telepon=a)},null,8,["modelValue"]),(0,n.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Bukti Diri",modelValue:l.value.wali_bukti_diri,"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.wali_bukti_diri=a),options:["KTP","SIM"],clearable:"","use-input":"","new-value-mode":"add",behavior:"menu"},null,8,["modelValue"]),(0,n.bF)(b,{dense:"",class:"q-mt-sm",outlined:"",label:"Nomor / ID Bukti Diri",modelValue:l.value.wali_bukti_diri_id,"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.wali_bukti_diri_id=a)},null,8,["modelValue"]),(0,n.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Status*",modelValue:l.value.wali_status,"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.wali_status=a),options:["Wali","Wakil Wali"],clearable:"","use-input":"","new-value-mode":"add",behavior:"menu"},null,8,["modelValue"]),(0,n.bF)(g,{dense:"",class:"q-mt-sm",outlined:"",label:"Hubungan*","emit-value":"","map-options":"",modelValue:l.value.wali_hubungan,"onUpdate:modelValue":e[11]||(e[11]=a=>l.value.wali_hubungan=a),options:i.value["hubungan-wali"],loading:o.value["hubungan-wali"],"use-input":"","new-value-mode":"add",clearable:"",behavior:"menu"},null,8,["modelValue","options","loading"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(_,{class:"flex bg-green-6"},{default:(0,n.k6)((()=>[(0,n.bF)(v),(0,n.bo)((0,n.bF)(k,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[F]]),(0,n.bF)(k,{type:"submit",label:"Print",class:"bg-green-10 text-green-11","no-caps":"",icon:"print"})])),_:1})])),_:1})])),_:1})}}};var O=l(3417),M=l(45),H=l(6395),J=l(4611),G=l(5034),Y=l(2677),Z=l(1038);const aa=z,ea=aa;V()(z,"components",{QCard:f.A,QForm:O.A,QCardSection:F.A,QDialog:M.A,QSpinnerCube:w.A,QInput:H.A,QSelect:J.A,QCardActions:G.A,QSpace:q.A,QBtn:Y.A}),V()(z,"directives",{ClosePopup:Z.A});var la=l(575);const na={__name:"DropDownPrint",setup(a){const{loadingMain:e}=(0,t.QW)((0,la.A)()),l=(0,s.lq)(),i=(0,t.KR)(!1),o=(0,t.KR)(""),u=(0,t.KR)(!1);async function d(){await(0,L.A)({endPoint:`reports/santri/registrasi/download?id=${l.params.id}`,loading:e,fileName:"registrasi-"+l.params.id,confirm:!0,message:"Download data registrasi?"})}async function r(){await(0,L.A)({endPoint:`reports/santri/standbook/download?id=${l.params.id}`,loading:e,fileName:"standbook-"+l.params.id,confirm:!0,message:"Download standbook?"})}async function m(){await(0,L.A)({endPoint:`reports/santri/keterangan-berhenti/download?id=${l.params.id}`,loading:e,fileName:"keterangan-berhenti-"+l.params.id,confirm:!0,message:"Download Keterangan Berhenti"})}function c(){o.value=`reports/santri/registrasi/view?id=${l.params.id}`,u.value=!0}function b(){o.value=`reports/santri/standbook/view?id=${l.params.id}`,u.value=!0}function g(a){i.value=!1;const e=new URLSearchParams(a).toString();o.value=`reports/santri/permohonan-berhenti/view?${e}`,u.value=!0}function p(){o.value=`reports/santri/keterangan-berhenti/view?id=${l.params.id}`,u.value=!0}return(a,e)=>{const l=(0,n.g2)("q-item-label"),t=(0,n.g2)("q-item-section"),s=(0,n.g2)("q-btn"),v=(0,n.g2)("q-item"),k=(0,n.g2)("q-list"),_=(0,n.g2)("q-btn-dropdown"),f=(0,n.g2)("q-dialog"),F=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(_,{color:"green-10",label:"Cetak",icon:"print","no-caps":"",class:"text-green-11 q-px-md",size:"sm"},{default:(0,n.k6)((()=>[(0,n.bF)(k,null,{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(v,null,{default:(0,n.k6)((()=>[(0,n.bF)(t,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.eW)("Registrasi")])),_:1})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"download",flat:"",onClick:d})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"print",flat:"",onClick:c})])),_:1})])),_:1})),[[F]]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(v,null,{default:(0,n.k6)((()=>[(0,n.bF)(t,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.eW)("Standbook")])),_:1})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"download",flat:"",onClick:r})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"print",flat:"",onClick:b})])),_:1})])),_:1})),[[F]]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(v,null,{default:(0,n.k6)((()=>[(0,n.bF)(t,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.eW)("Permohonan Berhenti")])),_:1})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"download",flat:"",disable:""})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"print",flat:"",onClick:e[0]||(e[0]=a=>i.value=!0)})])),_:1})])),_:1})),[[F]]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(v,null,{default:(0,n.k6)((()=>[(0,n.bF)(t,null,{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.eW)("Keterangan Berhenti")])),_:1})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"download",flat:"",onClick:m})])),_:1}),(0,n.bF)(t,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"print",flat:"",onClick:p})])),_:1})])),_:1})),[[F]])])),_:1})])),_:1}),(0,n.bF)(f,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a)},{default:(0,n.k6)((()=>[(0,n.bF)(ea,{onSubmitted:g})])),_:1},8,["modelValue"]),(0,n.bF)(f,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a)},{default:(0,n.k6)((()=>[(0,n.bF)(B.A,{url:o.value},null,8,["url"])])),_:1},8,["modelValue"])],64)}}};var ta=l(3614),sa=l(3766),ia=l(2589),oa=l(4958),ua=l(9039);const da=na,ra=da;V()(na,"components",{QBtnDropdown:ta.A,QList:sa.A,QItem:ia.A,QItemSection:oa.A,QItemLabel:ua.A,QBtn:Y.A,QDialog:M.A}),V()(na,"directives",{ClosePopup:Z.A});const ma={class:"flex items-center"},ca=(0,n.Lk)("div",{class:"text-subtitle1"},"Data Santri",-1),ba={class:"row"},ga={class:"col-12 col-sm-6 col-md-4 q-pa-sm"},pa={class:"col-12 col-sm-6 col-md-4 q-pa-sm"},va={__name:"SantriDetail",setup(a){(0,t.KR)((0,s.lq)().fullPath);const e=(0,t.Kh)({}),l=(0,s.lq)(),u=l.params.id,d=(0,U.A)(),{searchSantri:r,crudSantri:m}=(0,t.QW)(d),c=(0,t.KR)({}),b=(0,t.KR)({}),g=(0,t.KR)(!1),p=(0,t.KR)(!1);async function v(){const a=await(0,D.A)({endPoint:`images/santri/${u}`,loading:p});e.image=a.image_url}function k(){(0,I.A)().setEdit(),m.value=!0}(0,n.sV)((async()=>{const a=await(0,D.A)({endPoint:`santri/${u}`,loading:g});Object.assign(e,a.santri),c.value={ID:e.id,"Tanggal Daftar":(0,i.H6)(e.tgl_daftar_m)+" | "+(0,x.IU)(e.tgl_daftar_h),"Tahun Ajaran":`${e.th_ajaran_h||"-"} | ${e.th_ajaran_m||"-"}`},b.value={Nama:`${e.nama?.toUpperCase()} (${e.sex?.toUpperCase()})`,Alamat:`${e.jl||" "} RT ${String(e.rt||0).padStart(3,0)} RW ${String(e.rw||0).padStart(3,"0")} ${e.desa||" "} ${e.kecamatan||" "} ${e.kabupaten||" "} ${e.provinsi||" "} ${e.kode_pos||" "}`.replace(/\s\s+/g," "),Kelahiran:`${e.tmp_lahir||"-"}, ${(0,i.H6)(e.tgl_lahir)}`,"Data Akhir":e?.data_akhir?.data_akhir||"-"},(0,I.A)().setSantri(e),(0,I.A)().setOrtu(e?.ortu),(0,I.A)().setWali(e?.wali),(0,I.A)().setDataAkhir(e?.data_akhir),await v()}));const _=(0,t.KR)(!1),f=a=>_.value=a;async function F(){_.value=!1,await v()}return(a,l)=>{const s=(0,n.g2)("q-space"),i=(0,n.g2)("q-btn"),d=(0,n.g2)("q-card-section"),m=(0,n.g2)("q-card"),v=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(v,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{class:""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ma,[ca,(0,n.bF)(s),(0,n.bF)(i,{label:"Cari",onClick:l[0]||(l[0]=a=>r.value=!0),size:"sm",color:"green-2",class:"text-green-10 q-mr-sm",icon:"search"}),(0,n.bF)(i,{"no-caps":"",size:"sm",color:"green-2",class:"text-green-10 q-mr-sm",icon:"edit",label:"Edit",onClick:k}),(0,n.bF)(ra)])])),_:1}),(0,n.bF)(d,{class:"no-padding"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ba,[(0,n.Lk)("div",ga,[(0,n.bF)(o.A,{class:"q-mb-sm",data:c.value,loading:g.value,title:"Registrasi"},null,8,["data","loading"]),(0,n.bF)(S,{class:"q-mb-sm",title:"Identitas",data:b.value,loading:g.value,loadingImage:p.value,image:e?.image||"/user-default.png"},{button:(0,n.k6)((()=>[(0,n.bF)(i,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:l[1]||(l[1]=a=>_.value=!0)})])),_:1},8,["data","loading","loadingImage","image"])]),(0,n.Lk)("div",pa,[(0,n.bF)(K,{"santri-id":(0,t.R1)(u)},null,8,["santri-id"])])])])),_:1})])),_:1}),(0,n.bF)(Q.A,{"show-uploader":_.value,url:`/images/santri/${(0,t.R1)(u)}`,onUpdateUploader:f,onSuccessUpload:F},null,8,["show-uploader","url"])])),_:1})}}};var ka=l(5013);const _a=va,fa=_a;V()(va,"components",{QPage:ka.A,QCard:f.A,QCardSection:F.A,QSpace:q.A,QBtn:Y.A})}}]);