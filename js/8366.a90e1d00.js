"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8366],{8366:(e,a,l)=>{l.r(a),l.d(a,{default:()=>H});var t=l(51347),s=l(37763),n=l(34187),u=l(8633),o=l(58094),i=l(47509),d=l(783),r=l(15469),c=l(40423);const m={class:"flex items-center"},g=(0,t.Lk)("div",{class:"text-subtitle2"},"Profil Pengguna",-1),b={key:0},p={key:1},k={class:"absolute-top-right q-ma-sm"},v={style:{"max-width":"150px"},class:"q-mx-auto"},f={key:0},q=(0,t.Lk)("div",{class:"text-center q-my-lg"},[(0,t.Lk)("div",{class:"q-pa-md text-negative bg-red-1",style:{"border-radius":"10px"}},[(0,t.Lk)("div",null,"Akun Anda belum terkonfirmasi."),(0,t.Lk)("div",null,"Silakan hubungi Admin!")])],-1),x=[q],F=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nama ",-1),_=(0,t.Lk)("td",{class:"text-italic text-caption"}," Email ",-1),h=(0,t.Lk)("td",{class:"text-italic text-caption"}," Username ",-1),y=(0,t.Lk)("td",{class:"text-italic text-caption"}," Telepon ",-1),A={class:"float-right"},L={class:"fit row wrap justify-start items-start content-start"},w={key:0},Q={__name:"ProfileIndex",setup(e){const a=(0,n.KR)({}),l=(0,n.KR)(!1),q=(0,n.KR)(!1),Q=(0,n.KR)(!1),C=(0,n.KR)(!1),U=(0,n.KR)({}),V=(0,n.KR)(!1),P=e=>V.value=e;async function I(){V.value=!1,await S()}async function R(){const e=await(0,o.A)({endPoint:"user",loading:l});a.value=e.user}async function S(){const e=await(0,o.A)({endPoint:`images/users/${a.value.id}`,loading:q});a.value.image=e.image_url||"/user-default.png"}async function E(){const e=await(0,i.A)({endPoint:"user",data:{username:U.value.username,name:U.value.name,phone:U.value.phone},confirm:!0,notify:!0,loading:C});e&&(document.getElementById("btn-close").click(),await R(),await S())}function K(){Object.assign(U.value,a.value),Q.value=!0}(0,t.sV)((async()=>{await R(),await S()}));const X=async()=>{await(0,r.Wv)("Untuk mengganti password, silakan <strong>logout (keluar)</strong>. Pada halaman login, klik <strong>lupa password</strong>.<br/>Ikuti petunjuk yang diberikan.",0)};return(e,o)=>{const i=(0,t.g2)("q-space"),r=(0,t.g2)("q-card-section"),q=(0,t.g2)("q-spinner-cube"),R=(0,t.g2)("q-btn"),S=(0,t.g2)("q-img"),T=(0,t.g2)("q-item-label"),W=(0,t.g2)("q-item-section"),N=(0,t.g2)("q-item"),j=(0,t.g2)("q-toggle"),$=(0,t.g2)("q-list"),z=(0,t.g2)("q-card"),B=(0,t.g2)("q-dialog"),D=(0,t.g2)("q-input"),G=(0,t.g2)("q-card-actions"),O=(0,t.g2)("q-form"),H=(0,t.g2)("q-page"),J=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(H,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",m,[g,(0,t.bF)(i)])])),_:1}),(0,t.bF)(r,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(q,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("div",null,[(0,t.Lk)("div",k,[(0,t.bF)(R,{icon:"camera",round:"","no-caps":"",dense:"",glossy:"",class:"q-ma-xs q-px-sm",onClick:o[0]||(o[0]=e=>V.value=!0)})]),(0,t.Lk)("div",v,[(0,t.bF)(S,{src:a.value.image,ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"green",borderStyle:"solid"}},null,8,["src"])])]),a.value.confirmed_at?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",f,x)),(0,t.bF)($,{bordered:"",separator:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(W,null,{default:(0,t.k6)((()=>[(0,t.bF)(T,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User")])),_:1}),(0,t.bF)(T,null,{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tr",null,[F,(0,t.Lk)("td",null,(0,s.v_)(a.value.name),1)]),(0,t.Lk)("tr",null,[_,(0,t.Lk)("td",null,(0,s.v_)(a.value.email),1)]),(0,t.Lk)("tr",null,[h,(0,t.Lk)("td",null,(0,s.v_)(a.value.username),1)]),(0,t.Lk)("tr",null,[y,(0,t.Lk)("td",null,(0,s.v_)(a.value.phone||"-"),1)])])])),_:1}),(0,t.bF)(T,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",A,[(0,t.bF)(R,{label:"User",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:K}),(0,t.bF)(R,{label:"Password",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:X})])])),_:1})])),_:1})])),_:1}),(0,t.bF)(N,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(W,null,{default:(0,t.k6)((()=>[(0,t.bF)(T,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User Group")])),_:1}),(0,t.bF)(T,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",L,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value.roles,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-6"},[(0,t.bF)(j,{"model-value":e,color:"green",label:(0,n.R1)(d.nx)(a),disable:""},null,8,["model-value","label"])])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(B,{modelValue:Q.value,"onUpdate:modelValue":o[5]||(o[5]=e=>Q.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(z,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(O,{onSubmit:(0,u.D$)(E,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.eW)(" Update Username ")])),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[C.value?((0,t.uX)(),(0,t.CE)("div",w,[(0,t.bF)(B,{modelValue:C.value,"onUpdate:modelValue":o[1]||(o[1]=e=>C.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(D,{dense:"",outlined:"",label:"Nama",modelValue:U.value.name,"onUpdate:modelValue":o[2]||(o[2]=e=>U.value.name=e),hint:""},null,8,["modelValue"]),(0,t.bF)(D,{class:"q-mt-sm",dense:"",outlined:"",label:"Username",modelValue:U.value.username,"onUpdate:modelValue":o[3]||(o[3]=e=>U.value.username=e),hint:"Anda bisa login dengan username atau email"},null,8,["modelValue"]),(0,t.bF)(D,{class:"q-mt-sm",dense:"",outlined:"",label:"Nomor Telepon",modelValue:U.value.phone,"onUpdate:modelValue":o[4]||(o[4]=e=>U.value.phone=e),hint:"08123456789"},null,8,["modelValue"])])),_:1}),(0,t.bF)(G,{class:"flex bg-green-6"},{default:(0,t.k6)((()=>[(0,t.bF)(i),(0,t.bo)((0,t.bF)(R,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[J]]),(0,t.bF)(R,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(c.A,{"show-uploader":V.value,url:`/images/users/${a.value.id}`,width:300,height:300,"img-format":"webp",onUpdateUploader:P,onSuccessUpload:I},null,8,["show-uploader","url"])])),_:1})}}};var C=l(75013),U=l(83341),V=l(60222),P=l(5873),I=l(71402),R=l(22677),S=l(87472),E=l(53766),K=l(22589),X=l(14958),T=l(99039),W=l(55725),N=l(30045),j=l(53417),$=l(46395),z=l(25034),B=l(61038),D=l(272),G=l.n(D);const O=Q,H=O;G()(Q,"components",{QPage:C.A,QCard:U.A,QCardSection:V.A,QSpace:P.A,QSpinnerCube:I.A,QBtn:R.A,QImg:S.A,QList:E.A,QItem:K.A,QItemSection:X.A,QItemLabel:T.A,QToggle:W.A,QDialog:N.A,QForm:j.A,QInput:$.A,QCardActions:z.A}),G()(Q,"directives",{ClosePopup:B.A})}}]);