"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5431],{35431:(a,e,l)=>{l.r(e),l.d(e,{default:()=>pa});l(67590);var t=l(51347),n=l(34187),u=l(60455),i=l(21734),s=l(45426),o=l(37763),r=l(6397),d=l(23336),c=l(94265),k=l(30528),b=l(14348),v=(l(5047),l(94114),l(59557),l(39908)),g=l(90575),m=l(75605);const _={__name:"DropDownPrint",props:{data:{}},setup(a){const{loadingMain:e}=(0,n.QW)((0,g.A)()),l=(0,n.KR)(""),u=(0,n.KR)(!1),i=a,s=(0,n.KR)("");async function o(){await(0,v.A)({endPoint:`reports/iuran-card/download?${s.value}`,loading:e,fileName:"iuran-card",confirm:!0,message:"Download kartu iuran?"})}async function r(){await(0,v.A)({endPoint:`reports/iuran-cover/download?${s.value}`,loading:e,fileName:"iuran-cover",confirm:!0,message:"Download cover kartu iuran?"})}async function d(){await(0,v.A)({endPoint:`reports/iuran-kuitansi/download?${s.value}`,loading:e,fileName:"iuran-kuitansi",confirm:!0,message:"Download kuitansi iuran?"})}function c(){l.value=`reports/iuran-card/view?${s.value}`,u.value=!0}function k(){l.value=`reports/iuran-cover/view?${s.value}`,u.value=!0}function b(){l.value=`reports/iuran-kuitansi/view?${s.value}`,u.value=!0}return(0,t.sV)((()=>{s.value=new URLSearchParams(i.data).toString()})),(a,e)=>{const n=(0,t.g2)("q-item-label"),i=(0,t.g2)("q-item-section"),s=(0,t.g2)("q-btn"),v=(0,t.g2)("q-item"),g=(0,t.g2)("q-list"),_=(0,t.g2)("q-btn-dropdown"),f=(0,t.g2)("q-dialog"),p=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(_,{color:"green-11",label:"Cetak",icon:"print","no-caps":"",class:"text-green-10 q-px-md",dense:""},{default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.eW)("Kartu")])),_:1})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"download",flat:"",onClick:o})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"print",flat:"",onClick:c})])),_:1})])),_:1})),[[p]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.eW)("Cover")])),_:1})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"download",flat:"",onClick:r})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"print",flat:"",onClick:k})])),_:1})])),_:1})),[[p]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.eW)("Kuitansi")])),_:1})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"download",flat:"",onClick:d})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"print",flat:"",onClick:b})])),_:1})])),_:1})),[[p]])])),_:1})])),_:1}),(0,t.bF)(f,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(m.A,{url:l.value},null,8,["url"])])),_:1},8,["modelValue"])],64)}}};var f=l(73614),p=l(53766),F=l(22589),h=l(14958),A=l(99039),q=l(22677),x=l(30045),C=l(61038),R=l(272),w=l.n(R);const y=_,Q=y;w()(_,"components",{QBtnDropdown:f.A,QList:p.A,QItem:F.A,QItemSection:h.A,QItemLabel:A.A,QBtn:q.A,QDialog:x.A}),w()(_,"directives",{ClosePopup:C.A});const K={key:0},L={key:1},W={key:0},X={class:"text-caption"},S={class:"text-bold"},E=(0,t.Lk)("em",null,"Kasir:",-1),T=(0,t.Lk)("em",null,"Via:",-1),V=(0,t.Lk)("em",null,"Ket.:",-1),I={class:"flex flex-center"},j={class:"flex flex-center"},$={key:1,class:"q-ma-lg"},D=(0,t.Lk)("div",{class:"text-body2 text-italic text-center"}," Tidak ada data untuk ditampilkan! ",-1),P=(0,t.Lk)("hr",null,null,-1),z=(0,t.Lk)("div",{class:"text-weight-thin text-italic text-center"}," Klik angka tahun disamping, atau tambahkan data! ",-1),B=[D,P,z],U={__name:"IuranSantriByTh",setup(a){const e=(0,u.lq)(),l=(0,n.KR)(e.params.thAjaranH),s=(0,n.KR)(e.params.id),v=(0,n.KR)(!1),g=(0,n.KR)([]),m=(0,n.KR)(0),_=(0,n.KR)(!1),f=(0,n.KR)({});async function p(){if(l.value&&s.value){const a=await(0,i.A)({endPoint:`iuran/santri/${s.value}`,params:{th_ajaran_h:l.value},loading:v});g.value=a.iuran_by_th,m.value=g.value.reduce(((a,e)=>a+e.sub_total),0)}}async function F(a,e,l,t){const n=await(0,r.A)({endPoint:`iuran/${l.id}/set-check`,data:{check:a},confirm:!1,notify:!1});n||(g.value[t].check=1==a?0:1)}function h(){return g.value.filter((a=>1==a.check)).reduce(((a,e)=>a+e.sub_total),0)}function A(a){f.value=a,_.value=!0}return(0,t.sV)((async()=>{p()})),(a,e)=>{const u=(0,t.g2)("q-spinner-cube"),i=(0,t.g2)("q-item-label"),r=(0,t.g2)("q-item-section"),q=(0,t.g2)("q-item"),x=(0,t.g2)("q-space"),C=(0,t.g2)("q-toggle"),R=(0,t.g2)("q-btn"),w=(0,t.g2)("q-list"),y=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[v.value?((0,t.uX)(),(0,t.CE)("div",K,[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",L,[g.value.length>0?((0,t.uX)(),(0,t.CE)("div",W,[(0,t.bF)(w,{bordered:"",separator:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{class:"q-pa-sm bg-green-2"},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{caption:""},{default:(0,t.k6)((()=>[(0,t.eW)("Tahun Ajaran: "),(0,t.Lk)("strong",null,(0,o.v_)(l.value),1)])),_:1}),(0,t.bF)(i,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("TOTAL PEMBAYARAN")])),_:1}),(0,t.bF)(i,{class:"text-body1"},{default:(0,t.k6)((()=>[(0,t.eW)("Rp"+(0,o.v_)((0,n.R1)(c.z)(m.value)),1)])),_:1})])),_:1})])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(g.value,((a,e)=>((0,t.uX)(),(0,t.Wv)(q,{class:"q-pa-sm",key:e},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{overline:"",class:"flex"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(a.iuran)+" ",1),(0,t.bF)(x),(0,t.Lk)("div",X,(0,o.v_)((0,n.R1)(d.kz)(a.tgl_m))+" | "+(0,o.v_)((0,n.R1)(k.kh)((0,n.R1)(k.cE)(a.tgl_m))),1)])),_:2},1024),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.Lk)("span",S," Rp"+(0,o.v_)((0,n.R1)(c.z)(a.sub_total)),1),(0,t.eW)(" (Rp"+(0,o.v_)((0,n.R1)(c.z)(a.nominal))+" x "+(0,o.v_)(a.qty)+")",1)])),_:2},1024),(0,t.bF)(i,{caption:""},{default:(0,t.k6)((()=>[E,(0,t.eW)(" "),(0,t.Lk)("strong",null,(0,o.v_)(a.kasir||"-"),1),(0,t.eW)("; "),T,(0,t.eW)(" "),(0,t.Lk)("strong",null,(0,o.v_)(a.via||"-"),1),(0,t.eW)("; "),V,(0,t.eW)(" "),(0,t.Lk)("strong",null,(0,o.v_)(a.keterangan||"-"),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(r,{side:"",class:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",I,[(0,t.bF)(C,{color:"green",class:"text-green-10",modelValue:a.check,"onUpdate:modelValue":[e=>a.check=e,(l,t)=>F(l,t,a,e)],"checked-icon":"check","unchecked-icon":"clear","true-value":1,"false-value":0},null,8,["modelValue","onUpdate:modelValue"]),(0,t.bF)(R,{icon:"edit",glossy:"",outline:"",dense:"",round:"",color:"green-8",unelevated:"",onClick:e=>A(a)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128)),(0,t.bF)(q,{class:"q-pa-sm bg-green-8"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"text-green-11"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{overline:"",class:"text-green-1"},{default:(0,t.k6)((()=>[(0,t.eW)("TOTAL CEK")])),_:1}),(0,t.bF)(i,{class:"text-body1"},{default:(0,t.k6)((()=>[(0,t.eW)("Rp"+(0,o.v_)((0,n.R1)(c.z)(h())),1)])),_:1})])),_:1}),(0,t.bF)(r,{side:"",class:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",j,[(0,t.bF)(Q,{data:{santri_id:s.value,th_ajaran_h:l.value}},null,8,["data"])])])),_:1})])),_:1})])),_:1})])):((0,t.uX)(),(0,t.CE)("div",$,B))])),(0,t.bF)(y,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(b.A,{"is-new":!1,title:"Input Iuran",data:f.value,onSuccessDelete:p,onSuccessSubmit:p,"disable-santri-id":!0,"disable-th-ajaran":!0},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var H=l(71402),N=l(5873),M=l(55725);const O=U,Y=O;w()(U,"components",{QSpinnerCube:H.A,QList:p.A,QItem:F.A,QItemSection:h.A,QItemLabel:A.A,QSpace:N.A,QToggle:M.A,QBtn:q.A,QDialog:x.A});const G={key:0},J={key:1,class:"q-ma-lg"},Z=(0,t.Lk)("div",{class:"text-body2 text-italic text-center"}," Tidak ada data untuk ditampilkan! ",-1),aa=(0,t.Lk)("hr",null,null,-1),ea=(0,t.Lk)("div",{class:"text-weight-thin text-italic text-center"},[(0,t.eW)(" Yang bersangkutan belum pernah melakuan pembayaran. "),(0,t.Lk)("br"),(0,t.eW)(" Silakan klik tombol tambah! ")],-1),la=[Z,aa,ea],ta={key:2,class:"row"},na={class:"col bg-green-1",style:{"max-width":"90px"}},ua={class:"col"},ia={key:0,class:"q-ma-lg"},sa=(0,t.Lk)("div",{class:"text-italic text-center"}," Klik angka tahun disamping, atau tambahkan data! ",-1),oa=[sa],ra={key:1},da={__name:"IuranSantri",setup(a){const e=(0,n.KR)({}),l=(0,n.KR)([]),o=(0,n.KR)(!1),{params:r}=(0,u.lq)(),d=(0,n.KR)([]),c=(0,n.KR)(!1),k=(0,n.KR)({}),v=(0,n.KR)(0),g=(0,u.rd)();function m(a){a.th_ajaran_h==r.thAjaranH?v.value++:g.push(`/bendahara/iuran/santri/${a.santri_id}/${a.th_ajaran_h}`)}async function _(){const a=await(0,i.A)({endPoint:`iuran/santri/${r.id}`,loading:o});e.value=a.santri,e.value.santri_id=a.santri.id,l.value=a.iuran_total,d.value=l.value.map((a=>a.th_ajaran_h));const t=await(0,i.A)({endPoint:`images/santri/${r.id}`});e.value.image=t.image_url}function f(){return!!l.value[0]?.th_ajaran_h}return(0,t.sV)((async()=>{await _(),k.value={th_ajaran_h:r.thAjaranH||"",santri_id:e.value.id,nama:e.value.nama,data_akhir:e.value.data_akhir}})),(a,l)=>{const u=(0,t.g2)("q-toolbar-title"),i=(0,t.g2)("q-btn"),g=(0,t.g2)("q-toolbar"),_=(0,t.g2)("q-card-section"),p=(0,t.g2)("q-space"),F=(0,t.g2)("q-spinner-cube"),h=(0,t.g2)("q-route-tab"),A=(0,t.g2)("q-tabs"),q=(0,t.g2)("q-card"),x=(0,t.g2)("q-dialog"),C=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(C,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(_,{class:"bg-green-8 no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:(0,t.k6)((()=>[(0,t.eW)(" Data Iuran Santri ")])),_:1}),(0,t.bF)(i,{icon:"sync",round:"",class:"q-mr-md",flat:"",color:"green-11",dense:"",onClick:l[0]||(l[0]=a=>v.value++)})])),_:1})])),_:1}),(0,t.bF)(_,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(s.A,{data:e.value,loading:o.value},null,8,["data","loading"]),(0,t.bF)(q,{bordered:"",flat:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{class:"q-pa-sm text-subtitle1 bg-green-11 flex"},{default:(0,t.k6)((()=>[(0,t.eW)(" Data Iuran "),(0,t.bF)(p),(0,t.bF)(i,{dense:"",class:"q-px-md text-green-11",label:"Tambah","no-caps":"",icon:"add",color:"green-10",onClick:l[1]||(l[1]=a=>c.value=!0)})])),_:1}),((0,t.uX)(),(0,t.Wv)(_,{class:"no-padding",key:v.value},{default:(0,t.k6)((()=>[o.value&&!(0,n.R1)(r).thAjaranH?((0,t.uX)(),(0,t.CE)("div",G,[(0,t.bF)(F,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(0,t.Q3)("",!0),f()?((0,t.uX)(),(0,t.CE)("div",ta,[(0,t.Lk)("div",na,[(0,t.bF)(A,{vertical:"",dense:"",align:"left","no-caps":""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.bF)(h,{name:a,label:a,to:`/bendahara/iuran/santri/${(0,n.R1)(r).id}/${a}`},null,8,["name","label","to"])])))),128))])),_:1})]),(0,t.Lk)("div",ua,[(0,n.R1)(r).thAjaranH?((0,t.uX)(),(0,t.CE)("div",ra,[(0,t.bF)(Y)])):((0,t.uX)(),(0,t.CE)("div",ia,oa))])])):((0,t.uX)(),(0,t.CE)("div",J,la))])),_:1}))])),_:1})])),_:1})])),_:1}),(0,t.bF)(x,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=a=>c.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(b.A,{"is-new":!0,title:"Input Iuran",data:k.value,onSuccessSubmit:m,onSuccessDelete:a=>null,"disable-santri-id":!0},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var ca=l(75013),ka=l(83341),ba=l(60222),va=l(66739),ga=l(4629),ma=l(38805),_a=l(96641);const fa=da,pa=fa;w()(da,"components",{QPage:ca.A,QCard:ka.A,QCardSection:ba.A,QToolbar:va.A,QToolbarTitle:ga.A,QBtn:q.A,QSpace:N.A,QSpinnerCube:H.A,QTabs:ma.A,QRouteTab:_a.A,QDialog:x.A})}}]);